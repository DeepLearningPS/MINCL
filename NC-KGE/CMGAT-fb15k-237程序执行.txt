在丹阳的模型上，测试FB15k-237


tmux test201开始

 CUDA_VISIBLE_DEVICES=3 python -m torch.distributed.launch --nproc_per_node=1 --master_port 29201 run_fb15k-237_no_dgi.py --dataset FB15k-237 --optimizer adamw --use_test 1 --test_name optimizer_adamw  ，默认使用的是余弦'CosineAnnealingLR'，所以比较GAT版本的'CosineAnnealingLR'即可
结束



 目前模型使用动态学习率和AdamW效果不好。现在使用丹阳的原始的策略：adam

  CUDA_VISIBLE_DEVICES=3 python -m torch.distributed.launch --nproc_per_node=1 --master_port 29202 run_fb15k-237_no_dgi.py --dataset FB15k-237 --optimizer adam --change_lr 0 --use_test 1 --test_name optimizer_adam_change_lr_false

结束，效果依旧不好


跑一下丹阳最原始的程序，tmux dy001,计算所跑，dy002。丹阳的代码，默认设置不是最好的，效果很差

CUDA_VISIBLE_DEVICES=1 python -m torch.distributed.launch run_fb15k-237_no_dgi.py

Epoch 433 
MRR： 0.35832,
MR： 222.93394,
Hit@1： 0.26744
Hits@3： 0.39224
Hits@10： 0.54175



FB15k-237上的数据集效果达到了实验要求

看看在改造之后的代码上的效果：CMGAT

CUDA_VISIBLE_DEVICES=1 python -m torch.distributed.launch --nproc_per_node=1 --master_port 29202 run_fb15k-237_no_dgi.py --dataset FB15k-237 --optimizer adam --change_lr 0 --use_test 1 --test_name new_optimizer_adam_change_lr_false
结束

Epoch:415 
测试:
Test_mrr: 0.35753
Test_mr: 218.22217
Test_hit1: 0.26644
Test_hit3: 0.39250
Test_hit10: 0.53877

结论，CMGAT基本上达到了丹阳的源代码要求






 


测试模型：test

CUDA_VISIBLE_DEVICES=0 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.05  --score_func conve --subgraph_loss_rate 0 --sample_mod full --temperature 0.05 --stop_num 500 --change_lr 0 --optimizer adam --test 1 --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2_notext_conve_contrastive_loss_FB15k-237_CLcmgat_05_06_2023_23_54_02




2023-06-08 00:42:47,330 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-06-08 00:42:47,330 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.52945
2023-06-08 00:42:47,331 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 155.17871
2023-06-08 00:42:47,331 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.46648
2023-06-08 00:42:47,331 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.55258
2023-06-08 00:42:47,331 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.65367

模型：LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2_notext_conve_contrastive_loss_FB15k-237_CLcmgat_05_06_2023_23_54_02，模型先中断，我们单卡跑变温度系数


试试对比学习：

加载模型温度从0.05开始

CUDA_VISIBLE_DEVICES=2,3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 2 --rdzv_id 2 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.05  --score_func conve --subgraph_loss_rate 0 --sample_mod full --temperature 0.05 --stop_num 500 --change_lr 0 --optimizer adam 


tmux a -t fb15k
ssh scx6266@paraai-n32-h-01-agent-15
conda activate GNN
module load bazel/3.7.2
module load compilers/cuda/11.3
module load compilers/gcc/9.3.0
module load nccl/2.17.1-1_cuda11.3
cd /home/bingxing2/home/scx6266/GNN/new_CMGAT
export LD_PRELOAD=$LD_PRELOAD:/home/bingxing2/home/scx6266/.conda/envs/geodiff/lib/python3.8/site-packages/sklearn/__check_build/../../scikit_learn.libs/libgomp-d22c30c5.so.1.0.0




从头跑，温度系数从1.0开始 tmux a -t fb15k 断了，加载

CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0  --score_func conve --subgraph_loss_rate 0 --sample_mod full --temperature 1.0 --stop_num 50 --change_lr 1 --optimizer adam --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0_notext_conve_contrastive_loss_FB15k-237_CLcmgat_07_06_2023_23_34_01



静态学习率：160 + tmux fb15k 跑  tmux  a -t fb15k2也在跑

CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0  --score_func conve --subgraph_loss_rate 0 --sample_mod full --temperature 1.0 --stop_num 50 --change_lr 0 --optimizer adam 


2023-06-14 18:26:31,731 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-06-14 18:26:31,731 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 193
2023-06-14 18:26:31,731 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-06-14 18:26:31,732 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.54410
2023-06-14 18:26:31,732 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 133.01922
2023-06-14 18:26:31,732 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.48403
2023-06-14 18:26:31,732 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.56467
2023-06-14 18:26:31,732 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.66570
2023-06-14 18:26:31,732 - run_fb15k-237_no_dgi.py - [INFO] - 


state['optimizer']: dict_keys(['state', 'param_groups'])
2023-06-14 18:26:42,383 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-06-14 18:26:42,383 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.54227
2023-06-14 18:26:42,383 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 150.22647
2023-06-14 18:26:42,383 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.48085
2023-06-14 18:26:42,383 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.56565
2023-06-14 18:26:42,383 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.66464
2023-06-14 18:26:42,383 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Wed Jun 14 18:26:42 2023
file name: LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.05_notext_conve_contrastive_loss_FB15k-237_CLcmgat_12_06_2023_09_40_56



在跑一下：

静态学习率：160 + tmux fb15k 跑  tmux  a -t fb15k也在跑，

CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-BN  --score_func conve --subgraph_loss_rate 0 --sample_mod full --temperature 1.0 --stop_num 50 --change_lr 0 --optimizer adam 



在服务器上跑一下softmax_Loss tmux a -t fb15k


CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN  --score_func conve --subgraph_loss_rate 0 --sample_mod full --temperature 1.0 --stop_num 500 --change_lr 0 --optimizer adam 







在160上的默认配置的实验效果： Q默认1.0

2023-07-27 04:11:52,587 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-07-27 04:11:52,587 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 47
2023-07-27 04:11:52,587 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-07-27 04:11:52,587 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.34854
2023-07-27 04:11:52,587 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 176.36644
2023-07-27 04:11:52,587 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.25817
2023-07-27 04:11:52,587 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.37910
2023-07-27 04:11:52,587 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53239
2023-07-27 04:11:52,587 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-07-27 04:12:00,578 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-07-27 04:12:00,579 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34365
2023-07-27 04:12:00,579 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 188.05113
2023-07-27 04:12:00,579 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25173
2023-07-27 04:12:00,579 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.37658
2023-07-27 04:12:00,579 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.52951
2023-07-27 04:12:00,579 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Jul 27 04:12:00 2023
2023-07-27 04:12:00,595 - run_fb15k-237_no_dgi.py - [INFO] - file name: LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42


在160上继续测试Q值 camgat1，没提升

CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.1-subloss0.0  --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0  --lr  3.5e-4   --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42




看一下使用全部正样本的情况 cmagat2，不好
CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.1-subloss0.0  --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 0.1 --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42




在160上继续测试Q值  = 0.5， camgat1 ，使用部分负样本随机100，不好，且速度慢
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.1-subloss0.0  --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 0.5 --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42



在对比学习预训练的基础上，然后再使用BCLEloss

CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function bcel_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.1-subloss0.0  --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 0.5 --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42



#对比损失+BCELoss cmgat2

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function mix_loss --mix_loss_mod CLoss-BCELoss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.1-subloss0.0  --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 0.5 --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42






#对比损失+softmaxLoss cmgat3

CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function mix_loss --mix_loss_mod CLoss-MLoss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.1-subloss0.0  --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 0.5 --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42






在BX上

测试一下对比学习的正负样本得分的比重Q

tmux a -t gnn1 LN

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.5  --score_func conve --subgraph_loss_rate 0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 0.5


tmux a -t gnn2 BN

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-LN-CLoss-full-sample-Tem0.2-LN-Q0.5  --score_func conve --subgraph_loss_rate 0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 0.5


tmux a -t gnn3 加上子图级对比损失, 子图损失出现nan, 无法解决.继续

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q1.0-subloss0.1  --score_func conve --subgraph_loss_rate 0.1 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42



tmux a -t gnn2 加上子图级对比损失，加大子图损失比重, 子图损失出现nan, 无法解决.

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q1.0-subloss1.0  --score_func conve --subgraph_loss_rate 1.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42



tmux a -t gnn1 LN 测试Q值，正常的测试

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.5-subloss0.0  --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 0.5 --save_path LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem1.0-LN_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26_07_2023_04_16_42


2023-07-27 08:02:43,397 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-07-27 08:02:43,397 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 27
2023-07-27 08:02:43,397 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-07-27 08:02:43,397 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.34685
2023-07-27 08:02:43,397 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 181.51942
2023-07-27 08:02:43,397 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.25532
2023-07-27 08:02:43,397 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.37973
2023-07-27 08:02:43,398 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53222
2023-07-27 08:02:43,398 - run_fb15k-237_no_dgi.py - [INFO] - 


state['optimizer']: dict_keys(['state', 'param_groups'])
2023-07-27 08:02:46,937 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-07-27 08:02:46,937 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34200
2023-07-27 08:02:46,937 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 198.28579
2023-07-27 08:02:46,937 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.24875
2023-07-27 08:02:46,937 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.37582
2023-07-27 08:02:46,937 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53144
2023-07-27 08:02:46,937 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Jul 27 08:02:46 2023
file name: LP_ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.5-subloss0.0_notext_conve_contrastive_loss_FB15k-237_CLcmgat_26
_07_2023_16_41_38





tmux a -t gnn3 加上子图级对比损失, 重新训练 --lr 3.5e-4,在跑, 子图损失还是出现nan

CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name ChangeLR-UnitVec-BN-CLoss-full-sample-Tem0.2-LN-Q0.5-subloss0.1  --score_func conve --subgraph_loss_rate 0.1 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 0.5 



kill -9 $(ps aux | grep run_fb15k-237_no_dgi.py | grep -v grep | awk '{print $2}')



在160上

tmux a -t cmgat1 默认配置 tanh，效果不好
CUDA_VISIBLE_DEVICES=0 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  TanH --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 



tmux a -t cmgat2 更换激活函数 LeakyReLU， 效果不好
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  LeakyReLU --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 



tmux a -t cmgat3 更换激活函数 SELU， 效果不好
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  SELU --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 




tmux a -t cmgat4 更换激活函数 ReLU6, 这个有效果，可以的
CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 

2023-08-11 04:55:16,242 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-11 04:55:16,242 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 27
2023-08-11 04:55:16,242 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-11 04:55:16,242 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35069
2023-08-11 04:55:16,243 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 172.91406
2023-08-11 04:55:16,243 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26048
2023-08-11 04:55:16,243 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38366
2023-08-11 04:55:16,243 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53117
2023-08-11 04:55:16,243 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-11 04:55:25,548 - run_fb15k-237_no_dgi.py - [INFO] - ²âÊÔ:
2023-08-11 04:55:25,549 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34618
2023-08-11 04:55:25,549 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 186.85368
2023-08-11 04:55:25,549 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25496
2023-08-11 04:55:25,550 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.37946
2023-08-11 04:55:25,550 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.52841
2023-08-11 04:55:25,550 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Fri Aug 11 04:55:25 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6_notext_conve_contrastive_loss_FB15k-237_CLcmgat_10_08_2023_03_40_17



tmux a -t cmgat2 更换激活函数 Hardswish, 这个有效果不好
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  Hardswish --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 

2023-08-11 11:48:46,372 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-11 11:48:46,373 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 21
2023-08-11 11:48:46,373 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-11 11:48:46,373 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.33773
2023-08-11 11:48:46,373 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 197.32914
2023-08-11 11:48:46,373 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.24847
2023-08-11 11:48:46,373 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.36866
2023-08-11 11:48:46,373 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.51728
2023-08-11 11:48:46,374 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-11 11:48:57,543 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-11 11:48:57,543 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.33211
2023-08-11 11:48:57,543 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 208.30973
2023-08-11 11:48:57,543 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.24099
2023-08-11 11:48:57,544 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.36385
2023-08-11 11:48:57,544 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.51542
2023-08-11 11:48:57,544 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Fri Aug 11 11:48:57 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_Hardwish_notext_conve_contrastive_loss_FB15k-237_CLcmgat_10_08_2023_15_23_45






测试相似性度量函数 transe,distmult,complex,simple


tmux a -t test5 transe ，在160显存不够，跑不了，因此需要在节点17上跑
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-transe --score_func transe --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0

2023-08-11 06:18:39,823 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-11 06:18:39,823 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 11
2023-08-11 06:18:39,823 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-11 06:18:39,823 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.32375
2023-08-11 06:18:39,823 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 217.93727
2023-08-11 06:18:39,823 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.23847
2023-08-11 06:18:39,823 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.35195
2023-08-11 06:18:39,823 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.49678
2023-08-11 06:18:39,823 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-11 06:18:43,905 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-11 06:18:43,905 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.32141
2023-08-11 06:18:43,905 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 230.78142
2023-08-11 06:18:43,906 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.23519
2023-08-11 06:18:43,906 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.35227
2023-08-11 06:18:43,906 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.49401
2023-08-11 06:18:43,906 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Fri Aug 11 06:18:43 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-transe_notext_transe_contrastive_loss_FB15k-237_CLcm
gat_10_08_2023_23_40_45.log



tmux a -t cmgat3 distmult
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-distmult --score_func distmult --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 


2023-08-11 04:55:56,996 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-11 04:55:56,996 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 9
2023-08-11 04:55:56,996 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-11 04:55:56,996 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.32857
2023-08-11 04:55:56,997 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 280.21811
2023-08-11 04:55:56,997 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.24294
2023-08-11 04:55:56,997 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.35914
2023-08-11 04:55:56,997 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.49991
2023-08-11 04:55:56,997 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-11 04:56:05,146 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-11 04:56:05,147 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.32233
2023-08-11 04:56:05,147 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 294.19579
2023-08-11 04:56:05,147 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.23473
2023-08-11 04:56:05,147 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.35324
2023-08-11 04:56:05,147 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.49861
2023-08-11 04:56:05,147 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Fri Aug 11 04:56:05 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-distmult_notext_distmult_contrastive_loss_FB15k-237_CLcmgat_10_08_2023_17_01_22.log





cd /home/bingxing2/home/scx6266/GNN/new_CMGAT
conda activate GNN
module load bazel/3.7.2
module load compilers/cuda/11.3
module load compilers/gcc/9.3.0
module load nccl/2.17.1-1_cuda11.3
export LD_PRELOAD=$LD_PRELOAD:/home/bingxing2/home/scx6266/.conda/envs/GNN/lib/python3.8/site-packages/sklearn/__check_build/../../scikit_learn.libs/libgomp-d22c30c5.so.1.0.0

在节点17上测试

tmux a -t test1 complex
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-complex --score_func complex --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 

2023-08-11 00:55:49,220 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-11 00:55:49,220 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 9
2023-08-11 00:55:49,220 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-11 00:55:49,220 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.33144
2023-08-11 00:55:49,220 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 260.10710
2023-08-11 00:55:49,220 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.24468
2023-08-11 00:55:49,220 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.36182
2023-08-11 00:55:49,220 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.50664
2023-08-11 00:55:49,220 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-11 00:55:52,510 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-11 00:55:52,510 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.32346
2023-08-11 00:55:52,510 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 278.24536
2023-08-11 00:55:52,510 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.23627
2023-08-11 00:55:52,510 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.35373
2023-08-11 00:55:52,510 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.50017
2023-08-11 00:55:52,511 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Fri Aug 11 00:55:52 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-complex_notext_complex_contrastive_loss_FB15k-237_CL
cmgat_10_08_2023_17_22_38.log






tmux a -t test2 simple
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-simple --score_func simple --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 

2023-08-10 23:01:03,360 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-10 23:01:03,360 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 9
2023-08-10 23:01:03,360 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-10 23:01:03,360 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.32393
2023-08-10 23:01:03,361 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 269.62230
2023-08-10 23:01:03,361 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.23772
2023-08-10 23:01:03,361 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.35349
2023-08-10 23:01:03,361 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.49869
2023-08-10 23:01:03,361 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-10 23:01:06,697 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-10 23:01:06,698 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.31848
2023-08-10 23:01:06,698 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 288.06376
2023-08-10 23:01:06,698 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.23182
2023-08-10 23:01:06,698 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.34736
2023-08-10 23:01:06,698 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.49399
2023-08-10 23:01:06,698 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Aug 10 23:01:06 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-simple_notext_simple_contrastive_loss_FB15k-237_CLcm
gat_10_08_2023_17_23_09.log




在节点9上测试负样本数量，默认是全部采样

tmux a -t gnn1 pos sample 100
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-sample100 --score_func conve --subgraph_loss_rate 0.0 --sample_mod part --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --neg_sample_num 100

2023-08-12 05:24:20,324 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 05:24:20,324 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 104
2023-08-12 05:24:20,324 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 05:24:20,324 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.34895
2023-08-12 05:24:20,324 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 183.49296
2023-08-12 05:24:20,325 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.25726
2023-08-12 05:24:20,325 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38107
2023-08-12 05:24:20,325 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53427
2023-08-12 05:24:20,325 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 05:24:23,671 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 05:24:23,671 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34197
2023-08-12 05:24:23,671 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 198.19601
2023-08-12 05:24:23,671 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.24751
2023-08-12 05:24:23,671 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.37658
2023-08-12 05:24:23,671 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53100
2023-08-12 05:24:23,672 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 05:24:23 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-sample100_notext_conve_contrastive_loss_FB15k-
237_CLcmgat_10_08_2023_21_49_48.log



tmux a -t gnn2 pos sample 500
CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-sample500 --score_func conve --subgraph_loss_rate 0.0 --sample_mod part --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --neg_sample_num 500

2023-08-12 02:43:35,304 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 02:43:35,304 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 63
2023-08-12 02:43:35,304 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 02:43:35,304 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35655
2023-08-12 02:43:35,304 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 178.29589
2023-08-12 02:43:35,304 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26547
2023-08-12 02:43:35,304 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38999
2023-08-12 02:43:35,304 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.54100
2023-08-12 02:43:35,304 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 02:43:38,769 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 02:43:38,770 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.35174
2023-08-12 02:43:38,770 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 192.86111
2023-08-12 02:43:38,770 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25875
2023-08-12 02:43:38,770 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38676
2023-08-12 02:43:38,770 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53821
2023-08-12 02:43:38,770 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 02:43:38 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-sample500_notext_conve_contrastive_loss_FB15k-
237_CLcmgat_10_08_2023_21_49_48.log



在节点17上继续
tmux a -t test3 pos sample 1000 
CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-sample1000 --score_func conve --subgraph_loss_rate 0.0 --sample_mod part --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --neg_sample_num 1000

2023-08-12 07:46:43,224 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 07:46:43,224 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 52
2023-08-12 07:46:43,224 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 07:46:43,224 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35861
2023-08-12 07:46:43,224 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 175.41246
2023-08-12 07:46:43,224 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26721
2023-08-12 07:46:43,224 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.39176
2023-08-12 07:46:43,225 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.54357
2023-08-12 07:46:43,225 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 07:46:47,928 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 07:46:47,928 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.35470
2023-08-12 07:46:47,928 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 191.16738
2023-08-12 07:46:47,928 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.26187
2023-08-12 07:46:47,928 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38957
2023-08-12 07:46:47,928 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53938
2023-08-12 07:46:47,929 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 07:46:47 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-sample1000_notext_conve_contrastive_loss_FB15k
-237_CLcmgat_10_08_2023_21_51_28.log



tmux a -t test2 pos sample 5000 
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-sample5000 --score_func conve --subgraph_loss_rate 0.0 --sample_mod part --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --neg_sample_num 5000

2023-08-15 06:06:56,885 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-15 06:06:56,885 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 44
2023-08-15 06:06:56,885 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-15 06:06:56,885 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35921
2023-08-15 06:06:56,885 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 175.66895
2023-08-15 06:06:56,885 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26975
2023-08-15 06:06:56,885 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.39088
2023-08-15 06:06:56,885 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53978
2023-08-15 06:06:56,885 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-15 06:07:01,782 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-15 06:07:01,783 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.35506
2023-08-15 06:07:01,783 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 193.05299
2023-08-15 06:07:01,783 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.26358
2023-08-15 06:07:01,783 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.39011
2023-08-15 06:07:01,783 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53853
2023-08-15 06:07:01,783 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Tue Aug 15 06:07:01 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-sample5000_notext_conve_contrastive_loss_FB15k
-237_CLcmgat_11_08_2023_10_35_04.log




#全采样
tmux a -t test3 pos sample 全采样 
CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-full --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 

2023-08-13 01:59:56,579 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-13 01:59:56,579 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 43
2023-08-13 01:59:56,579 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-13 01:59:56,579 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35222
2023-08-13 01:59:56,579 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 173.55001
2023-08-13 01:59:56,579 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26099
2023-08-13 01:59:56,579 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38512
2023-08-13 01:59:56,579 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53507
2023-08-13 01:59:56,579 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-13 02:00:01,581 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-13 02:00:01,582 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34697
2023-08-13 02:00:01,582 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 194.08306
2023-08-13 02:00:01,582 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25454
2023-08-13 02:00:01,582 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38014
2023-08-13 02:00:01,582 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53474
2023-08-13 02:00:01,582 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sun Aug 13 02:00:01 2023
file_path: /home/bingxing2/home/


在节点9上： tmux a -t lkgnn1  效果一般。 全采样，并全部打乱试试。 效果也不行，且不如不打乱的速度快
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem02-fullsample --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0

2023-08-15 13:17:46,512 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-15 13:17:46,512 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 35
2023-08-15 13:17:46,512 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-15 13:17:46,513 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35213
2023-08-15 13:17:46,513 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 175.50907
2023-08-15 13:17:46,513 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26128
2023-08-15 13:17:46,513 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38415
2023-08-15 13:17:46,513 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53676
2023-08-15 13:17:46,513 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-15 13:17:53,280 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-15 13:17:53,281 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34868
2023-08-15 13:17:53,281 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 189.72098
2023-08-15 13:17:53,281 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25599
2023-08-15 13:17:53,281 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38410
2023-08-15 13:17:53,281 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53293
2023-08-15 13:17:53,281 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Tue Aug 15 13:17:53 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem02-fullsample_notext_conve_contrastive_loss
_FB15k-237_CLcmgat_14_08_2023_14_55_55.log


再跑一下，看看速度:

在节点9上： tmux a -t lkgnn6

CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem02-fullsample --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0

2023-08-16 21:39:04,553 - run_fb15k-237_no_dgi.py - [INFO] - 验证:
2023-08-16 21:39:04,554 - run_fb15k-237_no_dgi.py - [INFO] - Epoch:83  time 15.0m  LR:0.0010000000
2023-08-16 21:39:04,554 - run_fb15k-237_no_dgi.py - [INFO] - Train Loss:3.0538161552  Valid Loss:4.6981632165
2023-08-16 21:39:04,555 - run_fb15k-237_no_dgi.py - [INFO] - Valid MRR:0.34064  Valid MR:181.81406
2023-08-16 21:39:04,555 - run_fb15k-237_no_dgi.py - [INFO] - Valid H@1:0.24745  Valid H@3:0.37305  Valid H@10:0.52931
2023-08-16 21:39:04,556 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-16 21:39:04,556 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-16 21:39:04,556 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 32
2023-08-16 21:39:04,557 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-16 21:39:04,557 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35185
2023-08-16 21:39:04,557 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 170.06171
2023-08-16 21:39:04,558 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26139
2023-08-16 21:39:04,558 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38218
2023-08-16 21:39:04,558 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53673
2023-08-16 21:39:04,558 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-16 21:39:09,459 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-16 21:39:09,460 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34788
2023-08-16 21:39:09,461 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 188.12308
2023-08-16 21:39:09,461 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25557
2023-08-16 21:39:09,461 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38234
2023-08-16 21:39:09,461 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53367
2023-08-16 21:39:09,462 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Wed Aug 16 21:39:09 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem02-fullsample_notext_conve_contrastive_loss
_FB15k-237_CLcmgat_15_08_2023_23_50_26.log





在节点17上 tmux a -t lkgnn4 新的DRKG上试试。 全采样，并全部打乱试试。效果可以，达到了基线水平
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_drkg17k-21_no_dgi.py  --dataset DRKG17k-21 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem02-fullsample --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0


2023-08-16 00:16:56,205 - run_drkg17k-21_no_dgi.py - [INFO] - Early Stopping!!
2023-08-16 00:16:56,205 - run_drkg17k-21_no_dgi.py - [INFO] - best_epoch: 30
2023-08-16 00:16:56,205 - run_drkg17k-21_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-16 00:16:56,205 - run_drkg17k-21_no_dgi.py - [INFO] - best_mrr: 0.58685
2023-08-16 00:16:56,205 - run_drkg17k-21_no_dgi.py - [INFO] - best_mr: 169.44803
2023-08-16 00:16:56,205 - run_drkg17k-21_no_dgi.py - [INFO] - best_hit1: 0.50317
2023-08-16 00:16:56,205 - run_drkg17k-21_no_dgi.py - [INFO] - best_hit3: 0.63126
2023-08-16 00:16:56,205 - run_drkg17k-21_no_dgi.py - [INFO] - best_hit10: 0.74393
2023-08-16 00:16:56,205 - run_drkg17k-21_no_dgi.py - [INFO] - 


2023-08-16 00:17:04,920 - run_drkg17k-21_no_dgi.py - [INFO] - 测试:
2023-08-16 00:17:04,921 - run_drkg17k-21_no_dgi.py - [INFO] - Test_mrr: 0.58393
2023-08-16 00:17:04,921 - run_drkg17k-21_no_dgi.py - [INFO] - Test_mr: 174.07934
2023-08-16 00:17:04,921 - run_drkg17k-21_no_dgi.py - [INFO] - Test_hit1: 0.49924
2023-08-16 00:17:04,921 - run_drkg17k-21_no_dgi.py - [INFO] - Test_hit3: 0.62894
2023-08-16 00:17:04,921 - run_drkg17k-21_no_dgi.py - [INFO] - Test_hit10: 0.74213
2023-08-16 00:17:04,921 - run_drkg17k-21_no_dgi.py - [INFO] - 程序终止时间:Wed Aug 16 00:17:04 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/drkg_log/LP_ReLU6-conve-tem02-fullsample_notext_conve_contrastive_loss_DRK
G17k-21_CLcmgat_14_08_2023_15_34_38.log



使用RotatE作为解码器 在节点17，tmux a -t lkgnn4。 先用rotatev2

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-rotatev2-tem02-fullsample --score_func rotatev2 --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0




在节点9再试一下 gnn6，效果不好

CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset DB8k-28 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-rotatev2-tem02-fullsample --score_func rotatev2 --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0


在节点9再试一下 gnn5 不LN,没LN不行
CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset DB8k-28 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-rotatev2-tem02-fullsample --score_func rotatev2 --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0



在节点9上c gnn3,使用Transe+ConvE试试,不好。继续按covne来，全部采样试试
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset DB8k-28 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem02-fullsample --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0


2023-08-18 09:01:08,633 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-18 09:01:08,633 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 144
2023-08-18 09:01:08,634 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-18 09:01:08,635 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.49056
2023-08-18 09:01:08,635 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 40.13444
2023-08-18 09:01:08,635 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.38046
2023-08-18 09:01:08,635 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.54522
2023-08-18 09:01:08,635 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.70060
2023-08-18 09:01:08,635 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-18 09:01:10,537 - run_fb15k-237_no_dgi.py - [INFO] - ²âÊÔ:
2023-08-18 09:01:10,538 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.49155
2023-08-18 09:01:10,538 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 37.64428
2023-08-18 09:01:10,538 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.37910
2023-08-18 09:01:10,538 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.54795
2023-08-18 09:01:10,538 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.70575
2023-08-18 09:01:10,538 - run_fb15k-237_no_dgi.py - [INFO] - ³ÌÐòÖÕÖ¹Ê±¼ä:Fri Aug 18 09:01:10 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem02-fullsample_notext_conve_contrastive_loss_DB8k-28_CLcmgat_17_08_2023_21_41_26.log
效果未达到最佳，可能是epoch设置少了的缘故，MRR在50个Epoch没有提升，则模型就停止了




、在节点9上， gnn5, 部分采样，效果更好
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset DB8k-28 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-sample1000 --score_func conve --subgraph_loss_rate 0.0 --sample_mod part --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --neg_sample_num 1000

2023-08-19 16:56:10,078 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-19 16:56:10,078 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 160
2023-08-19 16:56:10,078 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-19 16:56:10,078 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.49980
2023-08-19 16:56:10,079 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 36.98734
2023-08-19 16:56:10,082 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.38720
2023-08-19 16:56:10,082 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.55987
2023-08-19 16:56:10,082 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.71124
2023-08-19 16:56:10,082 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-19 16:56:14,137 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-19 16:56:14,138 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.49880
2023-08-19 16:56:14,138 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 34.31313
2023-08-19 16:56:14,138 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.38341
2023-08-19 16:56:14,138 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.56107
2023-08-19 16:56:14,138 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.71812
2023-08-19 16:56:14,138 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 19 16:56:14 2023
2023-08-19 16:56:14,142 - run_fb15k-237_no_dgi.py - [INFO] - file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-sample1000_notext_conve_contrastive_loss_DB8k-28_CLcmgat_17_08_2023_21_59_56.log
2023-08-19 16:56:14,142 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 19 16:56:14 2023



在160上，温度系数测试

tmux a -t lkgnn1 tem = 0.2

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem02-fullsample --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 

2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 37
2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35136
2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 170.99478
2023-08-12 04:54:22,099 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26005
2023-08-12 04:54:22,099 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38349
2023-08-12 04:54:22,099 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53718
2023-08-12 04:54:22,099 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 04:54:30,771 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34782
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 189.21416
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25528
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38388
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53017
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 04:54:30 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem005_notext_conve_contrastive_loss_FB15k-237_CLcmgat_11_08_2023_11_21_19.log


tmux a -t cmgat2 tem = 0.1
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem01 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.1 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 
2023-08-12 05:59:38,514 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 05:59:38,514 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 40
2023-08-12 05:59:38,514 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 05:59:38,514 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35252
2023-08-12 05:59:38,515 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 173.33758
2023-08-12 05:59:38,515 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26248
2023-08-12 05:59:38,515 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38449
2023-08-12 05:59:38,515 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53373
2023-08-12 05:59:38,516 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34741
2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 190.31767
2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25540
2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38222
2023-08-12 05:59:46,202 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53130
2023-08-12 05:59:46,202 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 05:59:46 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem01_notext_conve_contrastive_loss_FB15k-237_CLcmgat_11_08_2023_12_07_00.log



tmux a -t cmgat3 tem = 0.3
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem03 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.3 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 

2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 29
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35075
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 169.78899
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26036
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38369
2023-08-12 03:33:06,555 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53102
2023-08-12 03:33:06,555 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 03:33:16,937 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 03:33:16,940 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34826
2023-08-12 03:33:16,941 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 187.96384
2023-08-12 03:33:16,942 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25784
2023-08-12 03:33:16,942 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38127
2023-08-12 03:33:16,942 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.52817
2023-08-12 03:33:16,943 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 03:33:16 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem03_notext_conve_contrastive_loss_FB15k-237_CLcmgat_11_08_2023_11_23_16.log


tmux a -t cmgat4 tem = 0.5
CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem05 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.5 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0

2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 29
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35166
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 167.32253
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26119
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38386
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53291
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 03:34:17,131 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 03:34:17,131 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34764
2023-08-12 03:34:17,131 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 187.22425
2023-08-12 03:34:17,131 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25708
2023-08-12 03:34:17,132 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38129
2023-08-12 03:34:17,132 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.52876
2023-08-12 03:34:17,132 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 03:34:17 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem05_notext_conve_contrastive_loss_FB15k-237_CLcmgat_11_08_2023_11_24_00.log


节点17上

tmux a -t test1 tem = 0.7
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem07 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.7 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0

2023-08-11 21:30:08,557 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-11 21:30:08,557 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 43
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35255
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 172.91166
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26065
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38617
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53778
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34756
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 190.15846
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25430
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38317
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53420
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Fri Aug 11 21:30:13 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem07_notext_conve_contrastive_loss_FB15k-237_
CLcmgat_11_08_2023_12_19_14.log



tmux a -t test1 tem = 0.8
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem08 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.8 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0

2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 28
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35161
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 172.27850
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26193
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38457
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53279
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34701
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 191.20524
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25559
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38136
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53093
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 05:30:06 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem08_notext_conve_contrastive_loss_FB15k-237_
CLcmgat_11_08_2023_21_51_43.log


tmux a -t test1 tem = 1.0
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem10 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.0 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0


2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 43
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35150
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 176.56923
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26062
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38437
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53519
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - ²âÊÔ:
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34866
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 190.72339
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25682
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38227
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53489
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - ³ÌÐòÖÕÖ¹Ê±¼ä:Sun Aug 13 01:41:51 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem10_notext_conve_contrastive_loss_FB15k-237_
CLcmgat_12_08_2023_16_41_58.log












cd /home/bingxing2/home/scx6266/GNN/SACN-master
conda activate GNN
module load bazel/3.7.2
module load compilers/cuda/11.3
module load compilers/gcc/9.3.0
module load nccl/2.17.1-1_cuda11.3
export LD_PRELOAD=$LD_PRELOAD:/home/bingxing2/home/scx6266/.conda/envs/GNN/lib/python3.8/site-packages/sklearn/__check_build/../../scikit_learn.libs/libgomp-d22c30c5.so.1.0.0

SACN程序执行：

节点17上，使用tmux a -t test


tmux a -t test1
CUDA_VISIBLE_DEVICES=1 python main.py model SACN dataset DB8k-28 process True
saving to saved_models/DB8k-28_SACN_0.0_0.2.model
2023-08-14 19:07:27.770982 (INFO): 
2023-08-14 19:07:27.771121 (INFO): --------------------------------------------------
2023-08-14 19:07:27.771191 (INFO): dev_evaluation
2023-08-14 19:07:27.771251 (INFO): --------------------------------------------------
2023-08-14 19:07:27.771320 (INFO): 
2023-08-14 19:08:10.170106 (INFO): Hits left @1: 0.3902994791666667
2023-08-14 19:08:10.171750 (INFO): Hits right @1: 0.24235026041666666
2023-08-14 19:08:10.173669 (INFO): Hits @1: 0.3163248697916667
2023-08-14 19:08:10.174706 (INFO): Hits left @2: 0.4994303385416667
2023-08-14 19:08:10.175750 (INFO): Hits right @2: 0.3447265625
2023-08-14 19:08:10.179045 (INFO): Hits @2: 0.4220784505208333
2023-08-14 19:08:10.180081 (INFO): Hits left @3: 0.5545247395833334
2023-08-14 19:08:10.181116 (INFO): Hits right @3: 0.4055989583333333
2023-08-14 19:08:10.183064 (INFO): Hits @3: 0.4800618489583333
2023-08-14 19:08:10.184152 (INFO): Hits left @4: 0.590087890625
2023-08-14 19:08:10.185204 (INFO): Hits right @4: 0.4454752604166667
2023-08-14 19:08:10.187122 (INFO): Hits @4: 0.5177815755208334
2023-08-14 19:08:10.188156 (INFO): Hits left @5: 0.616943359375
2023-08-14 19:08:10.189238 (INFO): Hits right @5: 0.480224609375
2023-08-14 19:08:10.191107 (INFO): Hits @5: 0.548583984375
2023-08-14 19:08:10.192144 (INFO): Hits left @6: 0.6376139322916666
2023-08-14 19:08:10.193201 (INFO): Hits right @6: 0.5108235677083334
2023-08-14 19:08:10.195110 (INFO): Hits @6: 0.57421875
2023-08-14 19:08:10.196173 (INFO): Hits left @7: 0.655517578125
2023-08-14 19:08:10.197256 (INFO): Hits right @7: 0.53369140625
2023-08-14 19:08:10.199168 (INFO): Hits @7: 0.5946044921875
2023-08-14 19:08:10.200198 (INFO): Hits left @8: 0.67041015625
2023-08-14 19:08:10.201230 (INFO): Hits right @8: 0.5542805989583334
2023-08-14 19:08:10.203174 (INFO): Hits @8: 0.6123453776041666
2023-08-14 19:08:10.204218 (INFO): Hits left @9: 0.6815592447916666
2023-08-14 19:08:10.205268 (INFO): Hits right @9: 0.5724283854166666
2023-08-14 19:08:10.207175 (INFO): Hits @9: 0.6269938151041666
2023-08-14 19:08:10.208217 (INFO): Hits left @10: 0.693115234375
2023-08-14 19:08:10.209246 (INFO): Hits right @10: 0.5862630208333334
2023-08-14 19:08:10.211145 (INFO): Hits @10: 0.6396891276041666
2023-08-14 19:08:10.212339 (INFO): Mean rank left: 42.316487630208336
2023-08-14 19:08:10.213288 (INFO): Mean rank right: 125.805908203125
2023-08-14 19:08:10.214995 (INFO): Mean rank: 84.06119791666667
2023-08-14 19:08:10.216065 (INFO): Mean reciprocal rank left: 0.49700704060620765
2023-08-14 19:08:10.217073 (INFO): Mean reciprocal rank right: 0.3565834759688702
2023-08-14 19:08:10.218900 (INFO): Mean reciprocal rank: 0.42679525828753895
2023-08-14 19:08:10.220770 (INFO): 
2023-08-14 19:08:10.220858 (INFO): --------------------------------------------------
2023-08-14 19:08:10.220930 (INFO): test_evaluation
2023-08-14 19:08:10.220996 (INFO): --------------------------------------------------
2023-08-14 19:08:10.221059 (INFO): 
2023-08-14 19:08:55.560694 (INFO): Hits left @1: 0.38912259615384615
2023-08-14 19:08:55.561801 (INFO): Hits right @1: 0.24661959134615385
2023-08-14 19:08:55.563808 (INFO): Hits @1: 0.31787109375
2023-08-14 19:08:55.564923 (INFO): Hits left @2: 0.5025540865384616
2023-08-14 19:08:55.566042 (INFO): Hits right @2: 0.34878305288461536
2023-08-14 19:08:55.568063 (INFO): Hits @2: 0.42566856971153844
2023-08-14 19:08:55.569787 (INFO): Hits left @3: 0.5559645432692307
2023-08-14 19:08:55.570907 (INFO): Hits right @3: 0.4063251201923077
2023-08-14 19:08:55.572898 (INFO): Hits @3: 0.4811448317307692
2023-08-14 19:08:55.574002 (INFO): Hits left @4: 0.5905949519230769
2023-08-14 19:08:55.575139 (INFO): Hits right @4: 0.45064603365384615
2023-08-14 19:08:55.577192 (INFO): Hits @4: 0.5206204927884616
2023-08-14 19:08:55.578295 (INFO): Hits left @5: 0.6166616586538461
2023-08-14 19:08:55.579396 (INFO): Hits right @5: 0.4836237980769231
2023-08-14 19:08:55.581390 (INFO): Hits @5: 0.5501427283653846
2023-08-14 19:08:55.582992 (INFO): Hits left @6: 0.6378455528846154
2023-08-14 19:08:55.584097 (INFO): Hits right @6: 0.5108924278846154
2023-08-14 19:08:55.586166 (INFO): Hits @6: 0.5743689903846154
2023-08-14 19:08:55.587300 (INFO): Hits left @7: 0.6551983173076923
2023-08-14 19:08:55.588407 (INFO): Hits right @7: 0.5341045673076923
2023-08-14 19:08:55.590496 (INFO): Hits @7: 0.5946514423076923
2023-08-14 19:08:55.591652 (INFO): Hits left @8: 0.6701472355769231
2023-08-14 19:08:55.592763 (INFO): Hits right @8: 0.5531850961538461
2023-08-14 19:08:55.594755 (INFO): Hits @8: 0.6116661658653846
2023-08-14 19:08:55.595882 (INFO): Hits left @9: 0.6837439903846154
2023-08-14 19:08:55.597844 (INFO): Hits right @9: 0.5702373798076923
2023-08-14 19:08:55.599899 (INFO): Hits @9: 0.6269906850961539
2023-08-14 19:08:55.601020 (INFO): Hits left @10: 0.6946364182692307
2023-08-14 19:08:55.602210 (INFO): Hits right @10: 0.5875150240384616
2023-08-14 19:08:55.604409 (INFO): Hits @10: 0.6410757211538461
2023-08-14 19:08:55.605741 (INFO): Mean rank left: 40.51960637019231
2023-08-14 19:08:55.606836 (INFO): Mean rank right: 117.88731971153847
2023-08-14 19:08:55.608721 (INFO): Mean rank: 79.20346304086539
2023-08-14 19:08:55.610523 (INFO): Mean reciprocal rank left: 0.4975435498125019
2023-08-14 19:08:55.611606 (INFO): Mean reciprocal rank right: 0.3601975498956071
2023-08-14 19:08:55.613538 (INFO): Mean reciprocal rank: 0.42887054985405454

tmux a -t test3
CUDA_VISIBLE_DEVICES=1 python main.py model SACN dataset New_PharmKG8k-28 process True
2023-08-16 01:11:31.331246 (INFO): dev_evaluation
2023-08-16 01:11:31.331311 (INFO): --------------------------------------------------
2023-08-16 01:11:31.331374 (INFO): 
2023-08-16 01:13:02.854030 (INFO): Hits left @1: 0.08298938679245282
2023-08-16 01:13:02.857716 (INFO): Hits right @1: 0.08463190700808626
2023-08-16 01:13:02.864577 (INFO): Hits @1: 0.08381064690026954
2023-08-16 01:13:02.868204 (INFO): Hits left @2: 0.13757159703504043
2023-08-16 01:13:02.871757 (INFO): Hits right @2: 0.13205441374663074
2023-08-16 01:13:02.878675 (INFO): Hits @2: 0.13481300539083557
2023-08-16 01:13:02.882302 (INFO): Hits left @3: 0.171875
2023-08-16 01:13:02.885842 (INFO): Hits right @3: 0.16492587601078168
2023-08-16 01:13:02.892784 (INFO): Hits @3: 0.16840043800539084
2023-08-16 01:13:02.896559 (INFO): Hits left @4: 0.19918716307277629
2023-08-16 01:13:02.900139 (INFO): Hits right @4: 0.191143025606469
2023-08-16 01:13:02.907074 (INFO): Hits @4: 0.19516509433962265
2023-08-16 01:13:02.910645 (INFO): Hits left @5: 0.22214033018867924
2023-08-16 01:13:02.914235 (INFO): Hits right @5: 0.2123904986522911
2023-08-16 01:13:02.921225 (INFO): Hits @5: 0.21726541442048516
2023-08-16 01:13:02.924778 (INFO): Hits left @6: 0.2426086590296496
2023-08-16 01:13:02.928334 (INFO): Hits right @6: 0.2309425539083558
2023-08-16 01:13:02.935247 (INFO): Hits @6: 0.2367756064690027
2023-08-16 01:13:02.938779 (INFO): Hits left @7: 0.2600025269541779
2023-08-16 01:13:02.942311 (INFO): Hits right @7: 0.24745198787061995
2023-08-16 01:13:02.949264 (INFO): Hits @7: 0.25372725741239893
2023-08-16 01:13:02.952791 (INFO): Hits left @8: 0.27545906334231807
2023-08-16 01:13:02.956701 (INFO): Hits right @8: 0.26278217654986524
2023-08-16 01:13:02.963585 (INFO): Hits @8: 0.26912061994609165
2023-08-16 01:13:02.967179 (INFO): Hits left @9: 0.28979952830188677
2023-08-16 01:13:02.970754 (INFO): Hits right @9: 0.2753116576819407
2023-08-16 01:13:02.977668 (INFO): Hits @9: 0.28255559299191374
2023-08-16 01:13:02.981213 (INFO): Hits left @10: 0.3027080525606469
2023-08-16 01:13:02.984711 (INFO): Hits right @10: 0.28773584905660377
2023-08-16 01:13:02.991681 (INFO): Hits @10: 0.29522195080862534
2023-08-16 01:13:02.996981 (INFO): Mean rank left: 262.23551212938
2023-08-16 01:13:03.000878 (INFO): Mean rank right: 310.83111522911054
2023-08-16 01:13:03.007550 (INFO): Mean rank: 286.5333136792453
2023-08-16 01:13:03.011661 (INFO): Mean reciprocal rank left: 0.1577034360803256
2023-08-16 01:13:03.015786 (INFO): Mean reciprocal rank right: 0.15295394695180875
2023-08-16 01:13:03.022986 (INFO): Mean reciprocal rank: 0.15532869151606724
2023-08-16 01:13:03.032246 (INFO): 
2023-08-16 01:13:03.032396 (INFO): --------------------------------------------------
2023-08-16 01:13:03.032498 (INFO): test_evaluation
2023-08-16 01:13:03.032605 (INFO): --------------------------------------------------
2023-08-16 01:13:03.032705 (INFO): 
2023-08-16 01:14:32.813655 (INFO): Hits left @1: 0.08345833333333333
2023-08-16 01:14:32.817279 (INFO): Hits right @1: 0.086
2023-08-16 01:14:32.824269 (INFO): Hits @1: 0.08472916666666666
2023-08-16 01:14:32.827862 (INFO): Hits left @2: 0.13635416666666667
2023-08-16 01:14:32.831410 (INFO): Hits right @2: 0.13566666666666666
2023-08-16 01:14:32.838696 (INFO): Hits @2: 0.13601041666666666
2023-08-16 01:14:32.842281 (INFO): Hits left @3: 0.17233333333333334
2023-08-16 01:14:32.845863 (INFO): Hits right @3: 0.1679375
2023-08-16 01:14:32.852936 (INFO): Hits @3: 0.17013541666666668
2023-08-16 01:14:32.856528 (INFO): Hits left @4: 0.20083333333333334
2023-08-16 01:14:32.860113 (INFO): Hits right @4: 0.19239583333333332
2023-08-16 01:14:32.867066 (INFO): Hits @4: 0.19661458333333334
2023-08-16 01:14:32.870664 (INFO): Hits left @5: 0.2248125
2023-08-16 01:14:32.874223 (INFO): Hits right @5: 0.21304166666666666
2023-08-16 01:14:32.881199 (INFO): Hits @5: 0.21892708333333333
2023-08-16 01:14:32.885116 (INFO): Hits left @6: 0.24427083333333333
2023-08-16 01:14:32.888704 (INFO): Hits right @6: 0.23077083333333334
2023-08-16 01:14:32.895693 (INFO): Hits @6: 0.23752083333333332
2023-08-16 01:14:32.899366 (INFO): Hits left @7: 0.2611875
2023-08-16 01:14:32.902950 (INFO): Hits right @7: 0.24679166666666666
2023-08-16 01:14:32.910010 (INFO): Hits @7: 0.2539895833333333
2023-08-16 01:14:32.913680 (INFO): Hits left @8: 0.27595833333333336
2023-08-16 01:14:32.917283 (INFO): Hits right @8: 0.26195833333333335
2023-08-16 01:14:32.924245 (INFO): Hits @8: 0.26895833333333335
2023-08-16 01:14:32.927930 (INFO): Hits left @9: 0.2906666666666667
2023-08-16 01:14:32.931505 (INFO): Hits right @9: 0.2754375
2023-08-16 01:14:32.938578 (INFO): Hits @9: 0.2830520833333333
2023-08-16 01:14:32.942253 (INFO): Hits left @10: 0.304125
2023-08-16 01:14:32.946638 (INFO): Hits right @10: 0.2875
2023-08-16 01:14:32.953544 (INFO): Hits @10: 0.2958125
2023-08-16 01:14:32.959027 (INFO): Mean rank left: 259.8307291666667
2023-08-16 01:14:32.963117 (INFO): Mean rank right: 312.43358333333333
2023-08-16 01:14:32.970007 (INFO): Mean rank: 286.13215625
2023-08-16 01:14:32.974198 (INFO): Mean reciprocal rank left: 0.1582253239040318
2023-08-16 01:14:32.978438 (INFO): Mean reciprocal rank right: 0.15456942849797284
2023-08-16 01:14:32.985917 (INFO): Mean reciprocal rank: 0.1563973762010023

tmux a -t test4
CUDA_VISIBLE_DEVICES=3 python main.py model SACN dataset BioKG72k_14 process True

2023-08-23 09:54:44.062163 (INFO): ########################################
2023-08-23 09:54:44.062251 (INFO):           COMPLETED EPOCH: 904                              
2023-08-23 09:54:44.062318 (INFO): train Loss: 0.00046006       99% CI: (0.00035802, 0.00056209), n=32
2023-08-23 09:54:44.062384 (INFO): ########################################
2023-08-23 09:54:44.062447 (INFO): 

saving to saved_models/BioKG72k_14_SACN_0.0_0.2.model
2023-08-23 09:54:44.188835 (INFO): 
2023-08-23 09:54:44.188965 (INFO): --------------------------------------------------
2023-08-23 09:54:44.189034 (INFO): dev_evaluation
2023-08-23 09:54:44.189099 (INFO): --------------------------------------------------
2023-08-23 09:54:44.189161 (INFO): 
2023-08-23 10:00:38.603343 (INFO): Hits left @1: 0.07969622905027933
2023-08-23 10:00:38.611691 (INFO): Hits right @1: 0.15661662011173183
2023-08-23 10:00:38.628208 (INFO): Hits @1: 0.11815642458100559
2023-08-23 10:00:38.636535 (INFO): Hits left @2: 0.10588337988826815
2023-08-23 10:00:38.644818 (INFO): Hits right @2: 0.22030377094972067
2023-08-23 10:00:38.661408 (INFO): Hits @2: 0.1630935754189944
2023-08-23 10:00:38.669701 (INFO): Hits left @3: 0.12099336592178771
2023-08-23 10:00:38.678004 (INFO): Hits right @3: 0.2626483938547486
2023-08-23 10:00:38.699575 (INFO): Hits @3: 0.19182087988826815
2023-08-23 10:00:38.707951 (INFO): Hits left @4: 0.1334933659217877
2023-08-23 10:00:38.716236 (INFO): Hits right @4: 0.29626396648044695
2023-08-23 10:00:38.732865 (INFO): Hits @4: 0.2148786662011173
2023-08-23 10:00:38.741175 (INFO): Hits left @5: 0.1450768156424581
2023-08-23 10:00:38.749569 (INFO): Hits right @5: 0.3232541899441341
2023-08-23 10:00:38.766024 (INFO): Hits @5: 0.2341655027932961
2023-08-23 10:00:38.774345 (INFO): Hits left @6: 0.15336941340782123
2023-08-23 10:00:38.782632 (INFO): Hits right @6: 0.3465345670391061
2023-08-23 10:00:38.799096 (INFO): Hits @6: 0.24995199022346368
2023-08-23 10:00:38.807507 (INFO): Hits left @7: 0.16092004189944134
2023-08-23 10:00:38.815895 (INFO): Hits right @7: 0.36758030726256985
2023-08-23 10:00:38.832412 (INFO): Hits @7: 0.2642501745810056
2023-08-23 10:00:38.840809 (INFO): Hits left @8: 0.16747555865921787
2023-08-23 10:00:38.849164 (INFO): Hits right @8: 0.3868802374301676
2023-08-23 10:00:38.865700 (INFO): Hits @8: 0.2771778980446927
2023-08-23 10:00:38.873910 (INFO): Hits left @9: 0.17245111731843576
2023-08-23 10:00:38.882152 (INFO): Hits right @9: 0.40397171787709496
2023-08-23 10:00:38.898581 (INFO): Hits @9: 0.28821141759776536
2023-08-23 10:00:38.906874 (INFO): Hits left @10: 0.17743540502793295
2023-08-23 10:00:38.915125 (INFO): Hits right @10: 0.42020775139664807
2023-08-23 10:00:38.931638 (INFO): Hits @10: 0.2988215782122905
2023-08-23 10:00:38.950073 (INFO): Mean rank left: 9723.003142458101
2023-08-23 10:00:38.961367 (INFO): Mean rank right: 98.03328386871509
2023-08-23 10:00:38.980587 (INFO): Mean rank: 4910.518213163407
2023-08-23 10:00:38.991625 (INFO): Mean reciprocal rank left: 0.11176600589578853
2023-08-23 10:00:39.002398 (INFO): Mean reciprocal rank right: 0.24534513014304896
2023-08-23 10:00:39.021884 (INFO): Mean reciprocal rank: 0.1785555680194187
2023-08-23 10:00:39.046250 (INFO): 
2023-08-23 10:00:39.046394 (INFO): --------------------------------------------------
2023-08-23 10:00:39.046419 (INFO): test_evaluation
2023-08-23 10:00:39.046519 (INFO): --------------------------------------------------
2023-08-23 10:00:39.046539 (INFO):


tmux a -t test2 
CUDA_VISIBLE_DEVICES=1 python main.py model SACN dataset DRKG17k-21 process True

2023-08-17 23:07:38.426905 (INFO): Hits left @1: 0.2732635022271715
2023-08-17 23:07:38.431199 (INFO): Hits right @1: 0.5167037861915368
2023-08-17 23:07:38.439503 (INFO): Hits @1: 0.3949836442093541
2023-08-17 23:07:38.443768 (INFO): Hits left @2: 0.37176364142538976
2023-08-17 23:07:38.448028 (INFO): Hits right @2: 0.603894070155902
2023-08-17 23:07:38.456419 (INFO): Hits @2: 0.4878288557906459
2023-08-17 23:07:38.460643 (INFO): Hits left @3: 0.4262249443207127
2023-08-17 23:07:38.465488 (INFO): Hits right @3: 0.6479155066815144
2023-08-17 23:07:38.473816 (INFO): Hits @3: 0.5370702255011136
2023-08-17 23:07:38.478739 (INFO): Hits left @4: 0.466418429844098
2023-08-17 23:07:38.483605 (INFO): Hits right @4: 0.677355929844098
2023-08-17 23:07:38.493221 (INFO): Hits @4: 0.571887179844098
2023-08-17 23:07:38.498109 (INFO): Hits left @5: 0.4928486915367483
2023-08-17 23:07:38.503091 (INFO): Hits right @5: 0.6975570712694877
2023-08-17 23:07:38.512735 (INFO): Hits @5: 0.5952028814031181
2023-08-17 23:07:38.517629 (INFO): Hits left @6: 0.5158163975501113
2023-08-17 23:07:38.522616 (INFO): Hits right @6: 0.714208658129176
2023-08-17 23:07:38.532459 (INFO): Hits @6: 0.6150125278396437
2023-08-17 23:07:38.537457 (INFO): Hits left @7: 0.5346429565701559
2023-08-17 23:07:38.542323 (INFO): Hits right @7: 0.7279022828507795
2023-08-17 23:07:38.552563 (INFO): Hits @7: 0.6312726197104677
2023-08-17 23:07:38.557491 (INFO): Hits left @8: 0.5511727449888641
2023-08-17 23:07:38.562402 (INFO): Hits right @8: 0.7402387249443207
2023-08-17 23:07:38.572246 (INFO): Hits @8: 0.6457057349665924
2023-08-17 23:07:38.577185 (INFO): Hits left @9: 0.5644313752783965
2023-08-17 23:07:38.582062 (INFO): Hits right @9: 0.7505741926503341
2023-08-17 23:07:38.591690 (INFO): Hits @9: 0.6575027839643652
2023-08-17 23:07:38.596698 (INFO): Hits left @10: 0.5778118040089086
2023-08-17 23:07:38.601599 (INFO): Hits right @10: 0.7591174832962138
2023-08-17 23:07:38.612963 (INFO): Hits @10: 0.6684646436525612
2023-08-17 23:07:38.618388 (INFO): Mean rank left: 171.3009117483296
2023-08-17 23:07:38.622718 (INFO): Mean rank right: 124.38542246659243
2023-08-17 23:07:38.630612 (INFO): Mean rank: 147.84316710746103
2023-08-17 23:07:38.634997 (INFO): Mean reciprocal rank left: 0.3776114518844761
2023-08-17 23:07:38.639204 (INFO): Mean reciprocal rank right: 0.6016014029720508
2023-08-17 23:07:38.647379 (INFO): Mean reciprocal rank: 0.4896064274282635
2023-08-17 23:07:38.659549 (INFO): 
2023-08-17 23:07:38.659694 (INFO): --------------------------------------------------
2023-08-17 23:07:38.659791 (INFO): test_evaluation
2023-08-17 23:07:38.659862 (INFO): --------------------------------------------------
2023-08-17 23:07:38.659928 (INFO): 
2023-08-17 23:09:58.628972 (INFO): Hits left @1: 0.27198040674603174
2023-08-17 23:09:58.633717 (INFO): Hits right @1: 0.5147259424603174
2023-08-17 23:09:58.643041 (INFO): Hits @1: 0.3933531746031746
2023-08-17 23:09:58.647889 (INFO): Hits left @2: 0.3691561259920635
2023-08-17 23:09:58.652602 (INFO): Hits right @2: 0.6015625
2023-08-17 23:09:58.662042 (INFO): Hits @2: 0.48535931299603174
2023-08-17 23:09:58.666797 (INFO): Hits left @3: 0.4236266121031746
2023-08-17 23:09:58.672219 (INFO): Hits right @3: 0.6438182043650794
2023-08-17 23:09:58.681544 (INFO): Hits @3: 0.533722408234127
2023-08-17 23:09:58.687078 (INFO): Hits left @4: 0.46208457341269843
2023-08-17 23:09:58.692469 (INFO): Hits right @4: 0.6740606398809523
2023-08-17 23:09:58.703626 (INFO): Hits @4: 0.5680726066468254
2023-08-17 23:09:58.709097 (INFO): Hits left @5: 0.4897848462301587
2023-08-17 23:09:58.714593 (INFO): Hits right @5: 0.6925378224206349
2023-08-17 23:09:58.725654 (INFO): Hits @5: 0.5911613343253969
2023-08-17 23:09:58.731124 (INFO): Hits left @6: 0.5135633680555556
2023-08-17 23:09:58.736718 (INFO): Hits right @6: 0.7097904265873016
2023-08-17 23:09:58.747521 (INFO): Hits @6: 0.6116768973214286
2023-08-17 23:09:58.752989 (INFO): Hits left @7: 0.5317925347222222
2023-08-17 23:09:58.758534 (INFO): Hits right @7: 0.7230282738095238
2023-08-17 23:09:58.769536 (INFO): Hits @7: 0.627410404265873
2023-08-17 23:09:58.775122 (INFO): Hits left @8: 0.5474640376984127
2023-08-17 23:09:58.780615 (INFO): Hits right @8: 0.7357545882936508
2023-08-17 23:09:58.791854 (INFO): Hits @8: 0.6416093129960317
2023-08-17 23:09:58.797309 (INFO): Hits left @9: 0.5607793898809523
2023-08-17 23:09:58.802795 (INFO): Hits right @9: 0.7465587797619048
2023-08-17 23:09:58.813798 (INFO): Hits @9: 0.6536690848214286
2023-08-17 23:09:58.820381 (INFO): Hits left @10: 0.5749317956349206
2023-08-17 23:09:58.826014 (INFO): Hits right @10: 0.7557663690476191
2023-08-17 23:09:58.836972 (INFO): Hits @10: 0.6653490823412699
2023-08-17 23:09:58.843455 (INFO): Mean rank left: 172.51678757440476
2023-08-17 23:09:58.848360 (INFO): Mean rank right: 130.35909598214286
2023-08-17 23:09:58.857421 (INFO): Mean rank: 151.4379417782738
2023-08-17 23:09:58.862492 (INFO): Mean reciprocal rank left: 0.3754785104906016
2023-08-17 23:09:58.867239 (INFO): Mean reciprocal rank right: 0.5989892587242224
2023-08-17 23:09:58.876605 (INFO): Mean reciprocal rank: 0.487233884607412


TruckER

cd /home/bingxing2/home/scx6266/GNN/TuckER-master

节点9 tmux a -t gnn1

 CUDA_VISIBLE_DEVICES=2 python main.py --dataset DB8k-28 --num_iterations 500 --batch_size 128 \
                                       --lr 0.0005 --dr 1.0 --edim 200 --rdim 200 --input_dropout 0.3 \
                                       --hidden_dropout1 0.4 --hidden_dropout2 0.5 --label_smoothing 0.1

500
3.4981508255004883
0.004107025633349495
Validation:
Number of data points: 24636
Hits @10: 0.6819694755642149
Hits @3: 0.5202955025166424
Hits @1: 0.34616009092385125
Mean rank: 40.82148075986361
Mean reciprocal rank: 0.4618757269276406
Test:
Number of data points: 26692
Hits @10: 0.6885583695489286
Hits @3: 0.519893601078975
Hits @1: 0.3427618762175933
Mean rank: 37.21999100854188
Mean reciprocal rank: 0.4616832484517378
46.7023663520813


tmux a -t gnn2
 CUDA_VISIBLE_DEVICES=3 python main.py --dataset New_PharmKG8k-28 --num_iterations 500 --batch_size 128 \
                                       --lr 0.0005 --dr 1.0 --edim 200 --rdim 200 --input_dropout 0.3 \
                                       --hidden_dropout1 0.4 --hidden_dropout2 0.5 --label_smoothing 0.1

500
7.695407152175903
0.005763442343431375
Validation:
Number of data points: 95140
Hits @10: 0.33642001261299137
Hits @3: 0.20059911709060332
Hits @1: 0.10176581879335715
Mean rank: 208.38576834139164
Mean reciprocal rank: 0.18122036137206804
Test:
Number of data points: 96100
Hits @10: 0.3359105098855359
Hits @3: 0.20224765868886577
Hits @1: 0.10284079084287201
Mean rank: 207.57304890738814
Mean reciprocal rank: 0.18243002232365224
44.92356491088867


节点9从新跑

tmux a -t gnn1

 CUDA_VISIBLE_DEVICES=0 python main.py --dataset BioKG72k_14 --num_iterations 500 --batch_size 128 \
                                       --lr 0.0005 --dr 1.0 --edim 200 --rdim 200 --input_dropout 0.3 \
                                       --hidden_dropout1 0.4 --hidden_dropout2 0.5 --label_smoothing 0.1


500
20.19394040107727
0.0006305311307569109
Validation:
Number of data points: 229234
Hits @10: 0.32714169800291404
Hits @3: 0.23627821352853415
Hits @1: 0.17386164356072834
Mean rank: 4668.231723915301
Mean reciprocal rank: 0.22574183676171525
Test:
Number of data points: 231548
Hits @10: 0.3279406429768342
Hits @3: 0.23749287404771366
Hits @1: 0.17388619206384853
Mean rank: 4688.628962461347
Mean reciprocal rank: 0.22610391206648112
173.07853865623474



tmux a -t gnn2

CUDA_VISIBLE_DEVICES=1 python main.py --dataset DRKG17k-21 --num_iterations 500 --batch_size 128 \
                                       --lr 0.0005 --dr 1.0 --edim 200 --rdim 200 --input_dropout 0.3 \
                                       --hidden_dropout1 0.4 --hidden_dropout2 0.5 --label_smoothing 0.1



500
2.3802833557128906
0.003349387340131216
Validation:
Number of data points: 115018
Hits @10: 0.7388495713714375
Hits @3: 0.6140430193534925
Hits @1: 0.4629797075240397
Mean rank: 112.73897129145003
Mean reciprocal rank: 0.5600624614742369
Test:
Number of data points: 129234
Hits @10: 0.7345667548787471
Hits @3: 0.6108763947567978
Hits @1: 0.46030456381447604
Mean rank: 113.08231579924788
Mean reciprocal rank: 0.5569119353204577
47.278499364852905




跑一下CompGCN在DRKG17k-21上 节点9 tmux a -t gnn6

CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_compgcn_drkg17k_21_no_dgi.py --dataset DRKG17k-21 --stop_num 50

2023-08-18 20:16:27,422 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - Early Stopping!!
2023-08-18 20:16:27,422 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - best_epoch: 605
2023-08-18 20:16:27,422 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-18 20:16:27,424 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - best_mrr: 0.56587
2023-08-18 20:16:27,424 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - best_mr: 118.19053
2023-08-18 20:16:27,424 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - best_hit1: 0.47054
2023-08-18 20:16:27,424 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - best_hit3: 0.62058
2023-08-18 20:16:27,424 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - best_hit10: 0.74069
2023-08-18 20:16:27,424 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - 


2023-08-18 20:16:27,424 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - Loading best model, Evaluating on Test data
2023-08-18 20:17:31,329 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - 


2023-08-18 20:17:31,329 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - 测试:
2023-08-18 20:17:31,329 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - Test_mrr: 0.56239
2023-08-18 20:17:31,329 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - Test_mr: 122.84625
2023-08-18 20:17:31,329 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - Test_hit1: 0.46610
2023-08-18 20:17:31,329 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - Test_hit3: 0.61855
2023-08-18 20:17:31,329 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - Test_hit10: 0.73945
2023-08-18 20:17:31,329 - run_compgcn_drkg17k_21_no_dgi.py - [INFO] - 程序终止时间:Fri Aug 18 20:17:31 2023



在160上跑

PairRE 

cd /data/fzg/GNN/医学GNN/PairRE-main/biokg
conda activate GNN
module load bazel/3.7.2
module load compilers/cuda/11.3
module load compilers/gcc/9.3.0
module load nccl/2.17.1-1_cuda11.3
export LD_PRELOAD=$LD_PRELOAD:/home/bingxing2/home/scx6266/.conda/envs/GNN/lib/python3.8/site-packages/sklearn/__check_build/../../scikit_learn.libs/libgomp-d22c30c5.so.1.0.0

CUDA_VISIBLE_DEVICES=3 python run.py --do_train --cuda --do_valid --do_test --evaluate_train \
  --model PairRE -n 128 -b 512 -d 2000 -g 12 -a 1.0 -adv -dr \
  -lr 0.001 --max_steps 300000 --cpu_num 2 --test_batch_size 32 --dataset DB8k-28


  这个好像跑不了，算了。 无法跑，放弃。


使用其他的模型

RotatE  #RotatE 效果很不错，为什么呢？
TransE
ComplEx
DistMult

https://github.com/DeepGraphLearning/KnowledgeGraphEmbedding

conda activate GNN
cd /data/fzg/GNN/医学GNN/KnowledgeGraphEmbedding

RotatE模型，DB8k-28 tmux a -t test1
CUDA_VISIBLE_DEVICES=0 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DB8k-28 \
 --model RotatE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/RotatE_DB8k-28 --test_batch_size 16 -de

2023-08-14 21:41:17,941 INFO     Evaluating on Valid Dataset...
2023-08-14 21:41:18,495 INFO     Evaluating the model... (0/1540)
2023-08-14 21:41:45,728 INFO     Evaluating the model... (1000/1540)
2023-08-14 21:41:59,594 INFO     Valid MRR at step 149999: 0.507895
2023-08-14 21:41:59,594 INFO     Valid MR at step 149999: 27.823510
2023-08-14 21:41:59,594 INFO     Valid HITS@1 at step 149999: 0.392515
2023-08-14 21:41:59,594 INFO     Valid HITS@3 at step 149999: 0.570060
2023-08-14 21:41:59,594 INFO     Valid HITS@10 at step 149999: 0.726904
2023-08-14 21:41:59,594 INFO     Evaluating on Test Dataset...
2023-08-14 21:42:00,189 INFO     Evaluating the model... (0/1670)
2023-08-14 21:42:27,522 INFO     Evaluating the model... (1000/1670)
2023-08-14 21:42:44,933 INFO     Test MRR at step 149999: 0.513428
2023-08-14 21:42:44,933 INFO     Test MR at step 149999: 27.674247
2023-08-14 21:42:44,933 INFO     Test HITS@1 at step 149999: 0.399071
2023-08-14 21:42:44,933 INFO     Test HITS@3 at step 149999: 0.571033
2023-08-14 21:42:44,933 INFO     Test HITS@10 at step 149999: 0.734003



RotatE模型, New_PharmKG8k-28 tmux a -t test2
CUDA_VISIBLE_DEVICES=2 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/New_PharmKG8k-28 \
 --model RotatE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/RotatE_New_PharmKG8k-28 --test_batch_size 16 -de

2023-08-14 22:02:55,315 INFO     Evaluating on Valid Dataset...
2023-08-14 22:02:56,060 INFO     Evaluating the model... (0/5948)
2023-08-14 22:03:19,625 INFO     Evaluating the model... (1000/5948)
2023-08-14 22:03:43,172 INFO     Evaluating the model... (2000/5948)
2023-08-14 22:04:07,362 INFO     Evaluating the model... (3000/5948)
2023-08-14 22:04:30,716 INFO     Evaluating the model... (4000/5948)
2023-08-14 22:04:54,081 INFO     Evaluating the model... (5000/5948)
2023-08-14 22:05:16,297 INFO     Valid MRR at step 149999: 0.267298
2023-08-14 22:05:16,297 INFO     Valid MR at step 149999: 191.049926
2023-08-14 22:05:16,297 INFO     Valid HITS@1 at step 149999: 0.159575
2023-08-14 22:05:16,297 INFO     Valid HITS@3 at step 149999: 0.318983
2023-08-14 22:05:16,297 INFO     Valid HITS@10 at step 149999: 0.462161
2023-08-14 22:05:16,297 INFO     Evaluating on Test Dataset...
2023-08-14 22:05:16,988 INFO     Evaluating the model... (0/6008)
2023-08-14 22:05:41,161 INFO     Evaluating the model... (1000/6008)
2023-08-14 22:06:04,902 INFO     Evaluating the model... (2000/6008)
2023-08-14 22:06:28,445 INFO     Evaluating the model... (3000/6008)
2023-08-14 22:06:52,669 INFO     Evaluating the model... (4000/6008)
2023-08-14 22:07:16,128 INFO     Evaluating the model... (5000/6008)
2023-08-14 22:07:39,415 INFO     Evaluating the model... (6000/6008)
2023-08-14 22:07:39,764 INFO     Test MRR at step 149999: 0.266453
2023-08-14 22:07:39,764 INFO     Test MR at step 149999: 193.660770
2023-08-14 22:07:39,764 INFO     Test HITS@1 at step 149999: 0.159386
2023-08-14 22:07:39,764 INFO     Test HITS@3 at step 149999: 0.318803
2023-08-14 22:07:39,764 INFO     Test HITS@10 at step 149999: 0.458699



RotatE模型, BioKG72k_14 tmux a -t gnn3 节点9
CUDA_VISIBLE_DEVICES=2 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/BioKG72k_14 \
 --model RotatE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/RotatE_BioKG72k_14 --test_batch_size 16 -de


2023-08-16 13:21:49,358 INFO     Valid MRR at step 149999: 0.288593
2023-08-16 13:21:49,358 INFO     Valid MR at step 149999: 4555.732788
2023-08-16 13:21:49,359 INFO     Valid HITS@1 at step 149999: 0.225595
2023-08-16 13:21:49,359 INFO     Valid HITS@3 at step 149999: 0.307393
2023-08-16 13:21:49,359 INFO     Valid HITS@10 at step 149999: 0.415850
2023-08-16 13:21:49,359 INFO     Evaluating on Test Dataset...
2023-08-16 13:21:51,410 INFO     Evaluating the model... (0/14472)
2023-08-16 13:24:35,762 INFO     Evaluating the model... (1000/14472)
2023-08-16 13:27:04,108 INFO     Evaluating the model... (2000/14472)
2023-08-16 13:29:43,301 INFO     Evaluating the model... (3000/14472)
2023-08-16 13:32:25,274 INFO     Evaluating the model... (4000/14472)
2023-08-16 13:35:09,100 INFO     Evaluating the model... (5000/14472)
2023-08-16 13:37:52,304 INFO     Evaluating the model... (6000/14472)
2023-08-16 13:40:37,840 INFO     Evaluating the model... (7000/14472)
2023-08-16 13:43:19,399 INFO     Evaluating the model... (8000/14472)
2023-08-16 13:45:56,351 INFO     Evaluating the model... (9000/14472)
2023-08-16 13:48:34,889 INFO     Evaluating the model... (10000/14472)
2023-08-16 13:51:13,888 INFO     Evaluating the model... (11000/14472)
2023-08-16 13:53:51,889 INFO     Evaluating the model... (12000/14472)
2023-08-16 13:56:28,460 INFO     Evaluating the model... (13000/14472)
2023-08-16 13:59:08,981 INFO     Evaluating the model... (14000/14472)
2023-08-16 14:00:22,429 INFO     Test MRR at step 149999: 0.290249
2023-08-16 14:00:22,430 INFO     Test MR at step 149999: 4575.285267
2023-08-16 14:00:22,431 INFO     Test HITS@1 at step 149999: 0.227149
2023-08-16 14:00:22,431 INFO     Test HITS@3 at step 149999: 0.309521
2023-08-16 14:00:22,431 INFO     Test HITS@10 at step 149999: 0.416968



RotatE模型, DRKG17k-21 tmux a -t test4
CUDA_VISIBLE_DEVICES=3 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DRKG17k-21 \
 --model RotatE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/RotatE_DRKG17k-21 --test_batch_size 16 -de

2023-08-14 23:18:36,831 INFO     Evaluating on Valid Dataset...
2023-08-14 23:18:37,800 INFO     Evaluating the model... (0/7190)
2023-08-14 23:19:33,076 INFO     Evaluating the model... (1000/7190)
2023-08-14 23:20:27,536 INFO     Evaluating the model... (2000/7190)
2023-08-14 23:21:22,777 INFO     Evaluating the model... (3000/7190)
2023-08-14 23:22:17,934 INFO     Evaluating the model... (4000/7190)
2023-08-14 23:23:12,637 INFO     Evaluating the model... (5000/7190)
2023-08-14 23:24:07,129 INFO     Evaluating the model... (6000/7190)
2023-08-14 23:25:01,913 INFO     Evaluating the model... (7000/7190)
2023-08-14 23:25:12,873 INFO     Valid MRR at step 149999: 0.553861
2023-08-14 23:25:12,874 INFO     Valid MR at step 149999: 164.507408
2023-08-14 23:25:12,874 INFO     Valid HITS@1 at step 149999: 0.438531
2023-08-14 23:25:12,874 INFO     Valid HITS@3 at step 149999: 0.621155
2023-08-14 23:25:12,874 INFO     Valid HITS@10 at step 149999: 0.769149
2023-08-14 23:25:12,874 INFO     Evaluating on Test Dataset...
2023-08-14 23:25:13,912 INFO     Evaluating the model... (0/8078)
2023-08-14 23:26:09,171 INFO     Evaluating the model... (1000/8078)
2023-08-14 23:27:04,035 INFO     Evaluating the model... (2000/8078)
2023-08-14 23:27:58,296 INFO     Evaluating the model... (3000/8078)
2023-08-14 23:28:52,150 INFO     Evaluating the model... (4000/8078)
2023-08-14 23:29:47,355 INFO     Evaluating the model... (5000/8078)
2023-08-14 23:30:41,002 INFO     Evaluating the model... (6000/8078)
2023-08-14 23:31:35,216 INFO     Evaluating the model... (7000/8078)
2023-08-14 23:32:29,967 INFO     Evaluating the model... (8000/8078)
2023-08-14 23:32:34,306 INFO     Test MRR at step 149999: 0.551534
2023-08-14 23:32:34,307 INFO     Test MR at step 149999: 170.463748
2023-08-14 23:32:34,307 INFO     Test HITS@1 at step 149999: 0.435683
2023-08-14 23:32:34,307 INFO     Test HITS@3 at step 149999: 0.620696
2023-08-14 23:32:34,307 INFO     Test HITS@10 at step 149999: 0.767476




试试rotatev2 和rotate差不多


RotatEv2模型，DB8k-28 tmux a -t test1, 160

CUDA_VISIBLE_DEVICES=2 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DB8k-28 \
 --model RotatEv2 \
 -n 256 -b 512 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/RotatEv2_DB8k-28 --test_batch_size 16 -de -dr

2023-08-16 18:59:28,977 INFO     Valid MRR at step 149999: 0.506386
2023-08-16 18:59:28,977 INFO     Valid MR at step 149999: 27.947759
2023-08-16 18:59:28,977 INFO     Valid HITS@1 at step 149999: 0.391216
2023-08-16 18:59:28,977 INFO     Valid HITS@3 at step 149999: 0.565757
2023-08-16 18:59:28,977 INFO     Valid HITS@10 at step 149999: 0.726985
2023-08-16 18:59:28,977 INFO     Evaluating on Test Dataset...
2023-08-16 18:59:29,476 INFO     Evaluating the model... (0/1670)
2023-08-16 19:00:08,936 INFO     Evaluating the model... (1000/1670)
2023-08-16 19:00:34,962 INFO     Test MRR at step 149999: 0.512065
2023-08-16 19:00:34,962 INFO     Test MR at step 149999: 27.427019
2023-08-16 19:00:34,962 INFO     Test HITS@1 at step 149999: 0.395774
2023-08-16 19:00:34,962 INFO     Test HITS@3 at step 149999: 0.573131
2023-08-16 19:00:34,962 INFO     Test HITS@10 at step 149999: 0.736400


减少维度试试：
CUDA_VISIBLE_DEVICES=2 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DB8k-28 \
 --model RotatEv2 \
 -n 256 -b 512 -d 200 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/RotatEv2_DB8k-28 --test_batch_size 16 -de -dr


2023-08-17 15:58:02,518 INFO     Valid MRR at step 149999: 0.481944
2023-08-17 15:58:02,518 INFO     Valid MR at step 149999: 34.410172
2023-08-17 15:58:02,518 INFO     Valid HITS@1 at step 149999: 0.365481
2023-08-17 15:58:02,518 INFO     Valid HITS@3 at step 149999: 0.540469
2023-08-17 15:58:02,518 INFO     Valid HITS@10 at step 149999: 0.706689
2023-08-17 15:58:02,518 INFO     Evaluating on Test Dataset...
2023-08-17 15:58:02,972 INFO     Evaluating the model... (0/1670)
2023-08-17 15:58:17,594 INFO     Evaluating the model... (1000/1670)
2023-08-17 15:58:26,878 INFO     Test MRR at step 149999: 0.487515
2023-08-17 15:58:26,879 INFO     Test MR at step 149999: 34.246254
2023-08-17 15:58:26,879 INFO     Test HITS@1 at step 149999: 0.370186
2023-08-17 15:58:26,879 INFO     Test HITS@3 at step 149999: 0.547018
2023-08-17 15:58:26,879 INFO     Test HITS@10 at step 149999: 0.713547

减少维度，性能下降


RotatEv2模型, New_PharmKG8k-28 tmux a -t test2 160
CUDA_VISIBLE_DEVICES=2 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/New_PharmKG8k-28 \
 --model RotatEv2 \
 -n 256 -b 512 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/RotatEv2_New_PharmKG8k-28 --test_batch_size 16 -de -dr


2023-08-16 19:39:56,078 INFO     Valid MRR at step 149999: 0.264605
2023-08-16 19:39:56,079 INFO     Valid MR at step 149999: 192.089142
2023-08-16 19:39:56,079 INFO     Valid HITS@1 at step 149999: 0.156443
2023-08-16 19:39:56,079 INFO     Valid HITS@3 at step 149999: 0.317711
2023-08-16 19:39:56,079 INFO     Valid HITS@10 at step 149999: 0.460490
2023-08-16 19:39:56,079 INFO     Evaluating on Test Dataset...
2023-08-16 19:39:56,777 INFO     Evaluating the model... (0/6008)
2023-08-16 19:40:33,397 INFO     Evaluating the model... (1000/6008)
2023-08-16 19:41:09,634 INFO     Evaluating the model... (2000/6008)
2023-08-16 19:41:46,235 INFO     Evaluating the model... (3000/6008)
2023-08-16 19:42:23,321 INFO     Evaluating the model... (4000/6008)
2023-08-16 19:42:59,461 INFO     Evaluating the model... (5000/6008)
2023-08-16 19:43:35,939 INFO     Evaluating the model... (6000/6008)
2023-08-16 19:43:36,385 INFO     Test MRR at step 149999: 0.265019
2023-08-16 19:43:36,386 INFO     Test MR at step 149999: 194.557773
2023-08-16 19:43:36,386 INFO     Test HITS@1 at step 149999: 0.156660
2023-08-16 19:43:36,386 INFO     Test HITS@3 at step 149999: 0.318751
2023-08-16 19:43:36,386 INFO     Test HITS@10 at step 149999: 0.460239



RotatEv2模型, BioKG72k_14 tmux a -t gnn3 节点9
CUDA_VISIBLE_DEVICES=2 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/BioKG72k_14 \
 --model RotatEv2 \
 -n 256 -b 1000 -d 512 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/RotatEv2_BioKG72k_14 --test_batch_size 16 -de -dr


RotatEv2模型, DRKG17k-21 tmux a -t gnn4 节点9
CUDA_VISIBLE_DEVICES=3 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DRKG17k-21 \
 --model RotatEv2 \
 -n 256 -b 512 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/RotatEv2_DRKG17k-21 --test_batch_size 16 -de -dr

2023-08-16 20:26:14,429 INFO     Valid MRR at step 149999: 0.555691
2023-08-16 20:26:14,429 INFO     Valid MR at step 149999: 169.610461
2023-08-16 20:26:14,429 INFO     Valid HITS@1 at step 149999: 0.438818
2023-08-16 20:26:14,429 INFO     Valid HITS@3 at step 149999: 0.625398
2023-08-16 20:26:14,429 INFO     Valid HITS@10 at step 149999: 0.774731
2023-08-16 20:26:14,429 INFO     Evaluating on Test Dataset...
2023-08-16 20:26:15,730 INFO     Evaluating the model... (0/8078)
2023-08-16 20:26:55,313 INFO     Evaluating the model... (1000/8078)
2023-08-16 20:27:34,413 INFO     Evaluating the model... (2000/8078)
2023-08-16 20:28:14,186 INFO     Evaluating the model... (3000/8078)
2023-08-16 20:28:53,278 INFO     Evaluating the model... (4000/8078)
2023-08-16 20:29:32,599 INFO     Evaluating the model... (5000/8078)
2023-08-16 20:30:11,004 INFO     Evaluating the model... (6000/8078)
2023-08-16 20:30:49,159 INFO     Evaluating the model... (7000/8078)
2023-08-16 20:31:27,481 INFO     Evaluating the model... (8000/8078)
2023-08-16 20:31:30,577 INFO     Test MRR at step 149999: 0.554652
2023-08-16 20:31:30,577 INFO     Test MR at step 149999: 173.965706
2023-08-16 20:31:30,577 INFO     Test HITS@1 at step 149999: 0.437238
2023-08-16 20:31:30,577 INFO     Test HITS@3 at step 149999: 0.626321
2023-08-16 20:31:30,577 INFO     Test HITS@10 at step 149999: 0.772266
















TransE模型，DB8k-28 tmux a -t test1
CUDA_VISIBLE_DEVICES=0 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DB8k-28 \
 --model TransE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/TransE_DB8k-28 --test_batch_size 16 


2023-08-15 01:42:37,439 INFO     Valid MRR at step 149999: 0.483434
2023-08-15 01:42:37,439 INFO     Valid MR at step 149999: 26.508727
2023-08-15 01:42:37,439 INFO     Valid HITS@1 at step 149999: 0.357038
2023-08-15 01:42:37,439 INFO     Valid HITS@3 at step 149999: 0.553783
2023-08-15 01:42:37,439 INFO     Valid HITS@10 at step 149999: 0.724671
2023-08-15 01:42:37,439 INFO     Evaluating on Test Dataset...
2023-08-15 01:42:37,919 INFO     Evaluating the model... (0/1670)
2023-08-15 01:42:53,758 INFO     Evaluating the model... (1000/1670)
2023-08-15 01:43:03,308 INFO     Test MRR at step 149999: 0.490975
2023-08-15 01:43:03,308 INFO     Test MR at step 149999: 25.852128
2023-08-15 01:43:03,308 INFO     Test HITS@1 at step 149999: 0.363967
2023-08-15 01:43:03,308 INFO     Test HITS@3 at step 149999: 0.561442
2023-08-15 01:43:03,308 INFO     Test HITS@10 at step 149999: 0.732055



TransE模型, New_PharmKG8k-28 tmux a -t test2
CUDA_VISIBLE_DEVICES=1 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/New_PharmKG8k-28 \
 --model TransE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/TransE_New_PharmKG8k-28 --test_batch_size 16 


2023-08-15 01:57:28,805 INFO     Valid MR at step 149999: 229.645596
2023-08-15 01:57:28,805 INFO     Valid HITS@1 at step 149999: 0.037271
2023-08-15 01:57:28,805 INFO     Valid HITS@3 at step 149999: 0.126435
2023-08-15 01:57:28,805 INFO     Valid HITS@10 at step 149999: 0.267858
2023-08-15 01:57:28,805 INFO     Evaluating on Test Dataset...
2023-08-15 01:57:29,375 INFO     Evaluating the model... (0/6008)
2023-08-15 01:57:46,186 INFO     Evaluating the model... (1000/6008)
2023-08-15 01:58:01,369 INFO     Evaluating the model... (2000/6008)
2023-08-15 01:58:17,406 INFO     Evaluating the model... (3000/6008)
2023-08-15 01:58:33,096 INFO     Evaluating the model... (4000/6008)
2023-08-15 01:58:48,889 INFO     Evaluating the model... (5000/6008)
2023-08-15 01:59:04,876 INFO     Evaluating the model... (6000/6008)
2023-08-15 01:59:05,122 INFO     Test MRR at step 149999: 0.115955
2023-08-15 01:59:05,122 INFO     Test MR at step 149999: 228.659282
2023-08-15 01:59:05,122 INFO     Test HITS@1 at step 149999: 0.038241
2023-08-15 01:59:05,123 INFO     Test HITS@3 at step 149999: 0.127357
2023-08-15 01:59:05,123 INFO     Test HITS@10 at step 149999: 0.269355



TransE模型, BioKG72k_14   GPU不够. 使用节点17， tmux  a -t test5
CUDA_VISIBLE_DEVICES=1 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/BioKG72k_14 \
 --model TransE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/TransE_BioKG72k_14 --test_batch_size 16 


2023-08-15 11:24:39,598 INFO     Valid MRR at step 149999: 0.114896
2023-08-15 11:24:39,599 INFO     Valid MR at step 149999: 5254.636245
2023-08-15 11:24:39,599 INFO     Valid HITS@1 at step 149999: 0.025171
2023-08-15 11:24:39,599 INFO     Valid HITS@3 at step 149999: 0.148019
2023-08-15 11:24:39,599 INFO     Valid HITS@10 at step 149999: 0.273533
2023-08-15 11:24:39,599 INFO     Evaluating on Test Dataset...
2023-08-15 11:24:41,976 INFO     Evaluating the model... (0/14472)
2023-08-15 11:27:30,073 INFO     Evaluating the model... (1000/14472)
2023-08-15 11:30:13,502 INFO     Evaluating the model... (2000/14472)
2023-08-15 11:32:46,589 INFO     Evaluating the model... (3000/14472)
2023-08-15 11:35:31,098 INFO     Evaluating the model... (4000/14472)
2023-08-15 11:38:07,602 INFO     Evaluating the model... (5000/14472)
2023-08-15 11:40:45,849 INFO     Evaluating the model... (6000/14472)
2023-08-15 11:43:24,212 INFO     Evaluating the model... (7000/14472)
2023-08-15 11:46:00,799 INFO     Evaluating the model... (8000/14472)
2023-08-15 11:48:33,556 INFO     Evaluating the model... (9000/14472)
2023-08-15 11:50:52,002 INFO     Evaluating the model... (10000/14472)
2023-08-15 11:53:18,034 INFO     Evaluating the model... (11000/14472)
2023-08-15 11:55:42,928 INFO     Evaluating the model... (12000/14472)
2023-08-15 11:58:07,566 INFO     Evaluating the model... (13000/14472)
2023-08-15 12:00:34,734 INFO     Evaluating the model... (14000/14472)
2023-08-15 12:01:51,659 INFO     Test MRR at step 149999: 0.116147
2023-08-15 12:01:51,659 INFO     Test MR at step 149999: 5267.797904
2023-08-15 12:01:51,659 INFO     Test HITS@1 at step 149999: 0.026241
2023-08-15 12:01:51,660 INFO     Test HITS@3 at step 149999: 0.148932
2023-08-15 12:01:51,660 INFO     Test HITS@10 at step 149999: 0.275887

TransE模型, DRKG17k-21 tmux a -t test4
CUDA_VISIBLE_DEVICES=3 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DRKG17k-21 \
 --model TransE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/TransE_DRKG17k-21 --test_batch_size 16 

2023-08-15 05:01:40,561 INFO     Valid MRR at step 149999: 0.322270
2023-08-15 05:01:40,561 INFO     Valid MR at step 149999: 134.303022
2023-08-15 05:01:40,561 INFO     Valid HITS@1 at step 149999: 0.035386
2023-08-15 05:01:40,561 INFO     Valid HITS@3 at step 149999: 0.559547
2023-08-15 05:01:40,561 INFO     Valid HITS@10 at step 149999: 0.745466
2023-08-15 05:01:40,561 INFO     Evaluating on Test Dataset...
2023-08-15 05:01:41,549 INFO     Evaluating the model... (0/8078)
2023-08-15 05:02:18,174 INFO     Evaluating the model... (1000/8078)
2023-08-15 05:02:55,082 INFO     Evaluating the model... (2000/8078)
2023-08-15 05:03:31,998 INFO     Evaluating the model... (3000/8078)
2023-08-15 05:04:09,197 INFO     Evaluating the model... (4000/8078)
2023-08-15 05:04:43,513 INFO     Evaluating the model... (5000/8078)
2023-08-15 05:05:18,128 INFO     Evaluating the model... (6000/8078)
2023-08-15 05:05:50,380 INFO     Evaluating the model... (7000/8078)
2023-08-15 05:06:23,344 INFO     Evaluating the model... (8000/8078)
2023-08-15 05:06:25,808 INFO     Test MRR at step 149999: 0.321312
2023-08-15 05:06:25,808 INFO     Test MR at step 149999: 138.556951
2023-08-15 05:06:25,808 INFO     Test HITS@1 at step 149999: 0.035300
2023-08-15 05:06:25,809 INFO     Test HITS@3 at step 149999: 0.558235
2023-08-15 05:06:25,809 INFO     Test HITS@10 at step 149999: 0.744038



ComplEx模型，DB8k-28 tmux a -t test1 跑
CUDA_VISIBLE_DEVICES=0 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DB8k-28 \
 --model ComplEx \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/ComplEx_DB8k-28 --test_batch_size 16 -de -dr

2023-08-15 05:52:15,691 INFO     Valid MRR at step 149999: 0.219635
2023-08-15 05:52:15,692 INFO     Valid MR at step 149999: 165.621083
2023-08-15 05:52:15,692 INFO     Valid HITS@1 at step 149999: 0.116821
2023-08-15 05:52:15,692 INFO     Valid HITS@3 at step 149999: 0.235063
2023-08-15 05:52:15,692 INFO     Valid HITS@10 at step 149999: 0.440697
2023-08-15 05:52:15,692 INFO     Evaluating on Test Dataset...
2023-08-15 05:52:16,246 INFO     Evaluating the model... (0/1670)
2023-08-15 05:52:34,738 INFO     Evaluating the model... (1000/1670)
2023-08-15 05:52:46,300 INFO     Test MRR at step 149999: 0.220537
2023-08-15 05:52:46,300 INFO     Test MR at step 149999: 162.227109
2023-08-15 05:52:46,300 INFO     Test HITS@1 at step 149999: 0.116140
2023-08-15 05:52:46,300 INFO     Test HITS@3 at step 149999: 0.239098
2023-08-15 05:52:46,300 INFO     Test HITS@10 at step 149999: 0.443129



ComplEx模型, New_PharmKG8k-28 tmux a -t test2 跑
CUDA_VISIBLE_DEVICES=1 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/New_PharmKG8k-28 \
 --model ComplEx \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/ComplEx_New_PharmKG8k-28 --test_batch_size 16 -de -dr

2023-08-15 06:08:29,430 INFO     Valid MRR at step 149999: 0.124469
2023-08-15 06:08:29,431 INFO     Valid MR at step 149999: 618.865083
2023-08-15 06:08:29,431 INFO     Valid HITS@1 at step 149999: 0.064085
2023-08-15 06:08:29,431 INFO     Valid HITS@3 at step 149999: 0.129147
2023-08-15 06:08:29,431 INFO     Valid HITS@10 at step 149999: 0.244944
2023-08-15 06:08:29,431 INFO     Evaluating on Test Dataset...
2023-08-15 06:08:30,180 INFO     Evaluating the model... (0/6008)
2023-08-15 06:08:47,004 INFO     Evaluating the model... (1000/6008)
2023-08-15 06:09:03,407 INFO     Evaluating the model... (2000/6008)
2023-08-15 06:09:19,969 INFO     Evaluating the model... (3000/6008)
2023-08-15 06:09:37,520 INFO     Evaluating the model... (4000/6008)
2023-08-15 06:09:53,875 INFO     Evaluating the model... (5000/6008)
2023-08-15 06:10:10,574 INFO     Evaluating the model... (6000/6008)
2023-08-15 06:10:10,874 INFO     Test MRR at step 149999: 0.123888
2023-08-15 06:10:10,874 INFO     Test MR at step 149999: 615.776358
2023-08-15 06:10:10,874 INFO     Test HITS@1 at step 149999: 0.063694
2023-08-15 06:10:10,874 INFO     Test HITS@3 at step 149999: 0.127908
2023-08-15 06:10:10,874 INFO     Test HITS@10 at step 149999: 0.244162

在tmux a -t test1上跑一下对比学习






ComplEx模型, BioKG72k_14 tmux a -t gnn1  节点9 
CUDA_VISIBLE_DEVICES=2 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/BioKG72k_14 \
 --model ComplEx \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/ComplEx_BioKG72k_14 --test_batch_size 16 -de -dr

2023-08-15 15:02:35,702 INFO     Valid MRR at step 149999: 0.110013
2023-08-15 15:02:35,702 INFO     Valid MR at step 149999: 6564.587046
2023-08-15 15:02:35,702 INFO     Valid HITS@1 at step 149999: 0.072171
2023-08-15 15:02:35,702 INFO     Valid HITS@3 at step 149999: 0.117552
2023-08-15 15:02:35,703 INFO     Valid HITS@10 at step 149999: 0.174180
2023-08-15 15:02:35,703 INFO     Evaluating on Test Dataset...
2023-08-15 15:02:37,632 INFO     Evaluating the model... (0/14472)
2023-08-15 15:05:13,589 INFO     Evaluating the model... (1000/14472)
2023-08-15 15:07:57,771 INFO     Evaluating the model... (2000/14472)
2023-08-15 15:10:43,772 INFO     Evaluating the model... (3000/14472)
2023-08-15 15:13:25,799 INFO     Evaluating the model... (4000/14472)
2023-08-15 15:16:25,714 INFO     Evaluating the model... (5000/14472)
2023-08-15 15:19:19,492 INFO     Evaluating the model... (6000/14472)
2023-08-15 15:22:08,646 INFO     Evaluating the model... (7000/14472)
2023-08-15 15:24:51,367 INFO     Evaluating the model... (8000/14472)
2023-08-15 15:27:35,401 INFO     Evaluating the model... (9000/14472)
2023-08-15 15:30:19,273 INFO     Evaluating the model... (10000/14472)
2023-08-15 15:33:03,343 INFO     Evaluating the model... (11000/14472)
2023-08-15 15:35:47,295 INFO     Evaluating the model... (12000/14472)
2023-08-15 15:38:29,664 INFO     Evaluating the model... (13000/14472)
2023-08-15 15:41:21,947 INFO     Evaluating the model... (14000/14472)
2023-08-15 15:42:31,339 INFO     Test MRR at step 149999: 0.110661
2023-08-15 15:42:31,339 INFO     Test MR at step 149999: 6553.991108
2023-08-15 15:42:31,340 INFO     Test HITS@1 at step 149999: 0.073091
2023-08-15 15:42:31,340 INFO     Test HITS@3 at step 149999: 0.117937
2023-08-15 15:42:31,340 INFO     Test HITS@10 at step 149999: 0.174033


ComplEx模型, DRKG17k-21 tmux a -t gnn4 节点9 
CUDA_VISIBLE_DEVICES=2 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DRKG17k-21 \
 --model ComplEx \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/ComplEx_DRKG17k-21 --test_batch_size 16 -de -dr

2023-08-15 05:33:24,460 INFO     Valid MRR at step 149999: 0.101196
2023-08-15 05:33:24,460 INFO     Valid MR at step 149999: 384.090195
2023-08-15 05:33:24,461 INFO     Valid HITS@1 at step 149999: 0.037612
2023-08-15 05:33:24,461 INFO     Valid HITS@3 at step 149999: 0.091003
2023-08-15 05:33:24,461 INFO     Valid HITS@10 at step 149999: 0.229677
2023-08-15 05:33:24,461 INFO     Evaluating on Test Dataset...
2023-08-15 05:33:25,577 INFO     Evaluating the model... (0/8078)
2023-08-15 05:34:04,380 INFO     Evaluating the model... (1000/8078)
2023-08-15 05:34:40,162 INFO     Evaluating the model... (2000/8078)
2023-08-15 05:35:17,462 INFO     Evaluating the model... (3000/8078)
2023-08-15 05:35:53,193 INFO     Evaluating the model... (4000/8078)
2023-08-15 05:36:29,613 INFO     Evaluating the model... (5000/8078)
2023-08-15 05:37:04,305 INFO     Evaluating the model... (6000/8078)
2023-08-15 05:37:39,762 INFO     Evaluating the model... (7000/8078)
2023-08-15 05:38:13,378 INFO     Evaluating the model... (8000/8078)
2023-08-15 05:38:16,016 INFO     Test MRR at step 149999: 0.098958
2023-08-15 05:38:16,017 INFO     Test MR at step 149999: 388.632419
2023-08-15 05:38:16,017 INFO     Test HITS@1 at step 149999: 0.035772
2023-08-15 05:38:16,017 INFO     Test HITS@3 at step 149999: 0.087407
2023-08-15 05:38:16,017 INFO     Test HITS@10 at step 149999: 0.226581




DistMult模型，DB8k-28 tmux a -t test1
CUDA_VISIBLE_DEVICES=0 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DB8k-28 \
 --model DistMult \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/DistMult_DB8k-28 --test_batch_size 16 -de -dr

2023-08-15 12:43:52,760 INFO     Valid MRR at step 149999: 0.204806
2023-08-15 12:43:52,760 INFO     Valid MR at step 149999: 154.509295
2023-08-15 12:43:52,760 INFO     Valid HITS@1 at step 149999: 0.101356
2023-08-15 12:43:52,760 INFO     Valid HITS@3 at step 149999: 0.221911
2023-08-15 12:43:52,760 INFO     Valid HITS@10 at step 149999: 0.427139
2023-08-15 12:43:52,760 INFO     Evaluating on Test Dataset...
2023-08-15 12:43:53,283 INFO     Evaluating the model... (0/1670)
2023-08-15 12:44:10,682 INFO     Evaluating the model... (1000/1670)
2023-08-15 12:44:21,167 INFO     Test MRR at step 149999: 0.207393
2023-08-15 12:44:21,168 INFO     Test MR at step 149999: 150.965570
2023-08-15 12:44:21,168 INFO     Test HITS@1 at step 149999: 0.104713
2023-08-15 12:44:21,168 INFO     Test HITS@3 at step 149999: 0.223063
2023-08-15 12:44:21,168 INFO     Test HITS@10 at step 149999: 0.431777


DistMult模型, New_PharmKG8k-28 tmux a -t test2
CUDA_VISIBLE_DEVICES=1 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/New_PharmKG8k-28 \
 --model DistMult \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/DistMult_New_PharmKG8k-28 --test_batch_size 16 -de -dr

2023-08-15 13:03:58,447 INFO     Valid MRR at step 149999: 0.219225
2023-08-15 13:03:58,447 INFO     Valid MR at step 149999: 492.280587
2023-08-15 13:03:58,448 INFO     Valid HITS@1 at step 149999: 0.153458
2023-08-15 13:03:58,448 INFO     Valid HITS@3 at step 149999: 0.239237
2023-08-15 13:03:58,448 INFO     Valid HITS@10 at step 149999: 0.337786
2023-08-15 13:03:58,448 INFO     Evaluating on Test Dataset...
2023-08-15 13:03:59,148 INFO     Evaluating the model... (0/6008)
2023-08-15 13:04:14,444 INFO     Evaluating the model... (1000/6008)
2023-08-15 13:04:29,353 INFO     Evaluating the model... (2000/6008)
2023-08-15 13:04:44,246 INFO     Evaluating the model... (3000/6008)
2023-08-15 13:05:01,208 INFO     Evaluating the model... (4000/6008)
2023-08-15 13:05:16,801 INFO     Evaluating the model... (5000/6008)
2023-08-15 13:05:31,469 INFO     Evaluating the model... (6000/6008)
2023-08-15 13:05:31,763 INFO     Test MRR at step 149999: 0.217576
2023-08-15 13:05:31,764 INFO     Test MR at step 149999: 486.756733
2023-08-15 13:05:31,764 INFO     Test HITS@1 at step 149999: 0.152081
2023-08-15 13:05:31,764 INFO     Test HITS@3 at step 149999: 0.237003
2023-08-15 13:05:31,764 INFO     Test HITS@10 at step 149999: 0.334703



DistMult模型, BioKG72k_14 tmux a -t gnn4 ,节点9 
CUDA_VISIBLE_DEVICES=3 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/BioKG72k_14 \
 --model DistMult \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/DistMult_BioKG72k_14 --test_batch_size 16 -de -dr


 2023-08-16 11:59:57,885 INFO     Valid MRR at step 149999: 0.043910
2023-08-16 11:59:57,885 INFO     Valid MR at step 149999: 6128.440314
2023-08-16 11:59:57,886 INFO     Valid HITS@1 at step 149999: 0.020433
2023-08-16 11:59:57,886 INFO     Valid HITS@3 at step 149999: 0.040356
2023-08-16 11:59:57,886 INFO     Valid HITS@10 at step 149999: 0.082113
2023-08-16 11:59:57,887 INFO     Evaluating on Test Dataset...
2023-08-16 11:59:59,879 INFO     Evaluating the model... (0/14472)
2023-08-16 12:02:53,787 INFO     Evaluating the model... (1000/14472)
2023-08-16 12:05:45,983 INFO     Evaluating the model... (2000/14472)
2023-08-16 12:08:43,311 INFO     Evaluating the model... (3000/14472)
2023-08-16 12:11:36,321 INFO     Evaluating the model... (4000/14472)
2023-08-16 12:14:34,725 INFO     Evaluating the model... (5000/14472)
2023-08-16 12:17:34,830 INFO     Evaluating the model... (6000/14472)
2023-08-16 12:20:35,405 INFO     Evaluating the model... (7000/14472)
2023-08-16 12:23:03,982 INFO     Evaluating the model... (8000/14472)
2023-08-16 12:25:24,762 INFO     Evaluating the model... (9000/14472)
2023-08-16 12:28:09,312 INFO     Evaluating the model... (10000/14472)
2023-08-16 12:30:58,904 INFO     Evaluating the model... (11000/14472)
2023-08-16 12:33:46,369 INFO     Evaluating the model... (12000/14472)
2023-08-16 12:36:33,205 INFO     Evaluating the model... (13000/14472)
2023-08-16 12:39:18,713 INFO     Evaluating the model... (14000/14472)
2023-08-16 12:40:36,688 INFO     Test MRR at step 149999: 0.044566
2023-08-16 12:40:36,688 INFO     Test MR at step 149999: 6101.759480
2023-08-16 12:40:36,688 INFO     Test HITS@1 at step 149999: 0.020950
2023-08-16 12:40:36,688 INFO     Test HITS@3 at step 149999: 0.041063
2023-08-16 12:40:36,689 INFO     Test HITS@10 at step 149999: 0.08251


DistMult模型, DRKG17k-21 tmux a -t test4
CUDA_VISIBLE_DEVICES=3 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DRKG17k-21 \
 --model DistMult \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/DistMult_DRKG17k-21 --test_batch_size 16 -de -dr


2023-08-15 13:58:14,638 INFO     Valid MRR at step 149999: 0.239879
2023-08-15 13:58:14,638 INFO     Valid MR at step 149999: 341.156628
2023-08-15 13:58:14,638 INFO     Valid HITS@1 at step 149999: 0.175112
2023-08-15 13:58:14,638 INFO     Valid HITS@3 at step 149999: 0.254708
2023-08-15 13:58:14,638 INFO     Valid HITS@10 at step 149999: 0.373550
2023-08-15 13:58:14,638 INFO     Evaluating on Test Dataset...
2023-08-15 13:58:15,534 INFO     Evaluating the model... (0/8078)
2023-08-15 13:58:48,417 INFO     Evaluating the model... (1000/8078)
2023-08-15 13:59:22,390 INFO     Evaluating the model... (2000/8078)
2023-08-15 13:59:56,372 INFO     Evaluating the model... (3000/8078)
2023-08-15 14:00:30,364 INFO     Evaluating the model... (4000/8078)
2023-08-15 14:01:02,453 INFO     Evaluating the model... (5000/8078)
2023-08-15 14:01:34,490 INFO     Evaluating the model... (6000/8078)
2023-08-15 14:02:05,822 INFO     Evaluating the model... (7000/8078)
2023-08-15 14:02:36,730 INFO     Evaluating the model... (8000/8078)
2023-08-15 14:02:39,174 INFO     Test MRR at step 149999: 0.239527
2023-08-15 14:02:39,174 INFO     Test MR at step 149999: 347.303380
2023-08-15 14:02:39,174 INFO     Test HITS@1 at step 149999: 0.174900
2023-08-15 14:02:39,174 INFO     Test HITS@3 at step 149999: 0.254368
2023-08-15 14:02:39,174 INFO     Test HITS@10 at step 149999: 0.370823







PairRE模型，DB8k-28 tmux a -t test1
CUDA_VISIBLE_DEVICES=0 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DB8k-28 \
 --model PairRE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/PairRE_DB8k-28 --test_batch_size 16 -dr

2023-08-15 21:02:10,893 INFO     Valid MRR at step 149999: 0.458386
2023-08-15 21:02:10,893 INFO     Valid MR at step 149999: 36.696704
2023-08-15 21:02:10,894 INFO     Valid HITS@1 at step 149999: 0.342750
2023-08-15 21:02:10,894 INFO     Valid HITS@3 at step 149999: 0.511000
2023-08-15 21:02:10,894 INFO     Valid HITS@10 at step 149999: 0.687855
2023-08-15 21:02:10,894 INFO     Evaluating on Test Dataset...
2023-08-15 21:02:11,447 INFO     Evaluating the model... (0/1670)
2023-08-15 21:02:31,095 INFO     Evaluating the model... (1000/1670)
2023-08-15 21:02:42,445 INFO     Test MRR at step 149999: 0.462780
2023-08-15 21:02:42,446 INFO     Test MR at step 149999: 34.183126
2023-08-15 21:02:42,446 INFO     Test HITS@1 at step 149999: 0.347220
2023-08-15 21:02:42,446 INFO     Test HITS@3 at step 149999: 0.514012
2023-08-15 21:02:42,446 INFO     Test HITS@10 at step 149999: 0.693691


PairRE模型, New_PharmKG8k-28 tmux a -t test2
CUDA_VISIBLE_DEVICES=1 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/New_PharmKG8k-28 \
 --model PairRE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/PairRE_New_PharmKG8k-28 --test_batch_size 16 -dr

2023-08-15 21:14:47,004 INFO     Valid MRR at step 149999: 0.253259
2023-08-15 21:14:47,004 INFO     Valid MR at step 149999: 205.337839
2023-08-15 21:14:47,004 INFO     Valid HITS@1 at step 149999: 0.166859
2023-08-15 21:14:47,004 INFO     Valid HITS@3 at step 149999: 0.280135
2023-08-15 21:14:47,004 INFO     Valid HITS@10 at step 149999: 0.423912
2023-08-15 21:14:47,004 INFO     Evaluating on Test Dataset...
2023-08-15 21:14:47,686 INFO     Evaluating the model... (0/6008)
2023-08-15 21:15:02,653 INFO     Evaluating the model... (1000/6008)
2023-08-15 21:15:16,735 INFO     Evaluating the model... (2000/6008)
2023-08-15 21:15:30,819 INFO     Evaluating the model... (3000/6008)
2023-08-15 21:15:46,049 INFO     Evaluating the model... (4000/6008)
2023-08-15 21:16:00,233 INFO     Evaluating the model... (5000/6008)
2023-08-15 21:16:14,909 INFO     Evaluating the model... (6000/6008)
2023-08-15 21:16:15,184 INFO     Test MRR at step 149999: 0.251355
2023-08-15 21:16:15,185 INFO     Test MR at step 149999: 207.596629
2023-08-15 21:16:15,185 INFO     Test HITS@1 at step 149999: 0.165765
2023-08-15 21:16:15,185 INFO     Test HITS@3 at step 149999: 0.277638
2023-08-15 21:16:15,185 INFO     Test HITS@10 at step 149999: 0.421134

PairRE模型, BioKG72k_14 tmux a gnn5 节点9
CUDA_VISIBLE_DEVICES=0 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/BioKG72k_14 \
 --model PairRE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/PairRE_BioKG72k_14 --test_batch_size 16 -dr

2023-08-16 12:47:08,522 INFO     Valid MRR at step 149999: 0.237107
2023-08-16 12:47:08,523 INFO     Valid MR at step 149999: 4570.693627
2023-08-16 12:47:08,523 INFO     Valid HITS@1 at step 149999: 0.167305
2023-08-16 12:47:08,524 INFO     Valid HITS@3 at step 149999: 0.258552
2023-08-16 12:47:08,524 INFO     Valid HITS@10 at step 149999: 0.379049
2023-08-16 12:47:08,524 INFO     Evaluating on Test Dataset...
2023-08-16 12:47:11,077 INFO     Evaluating the model... (0/14472)
2023-08-16 12:49:41,757 INFO     Evaluating the model... (1000/14472)
2023-08-16 12:52:38,981 INFO     Evaluating the model... (2000/14472)
2023-08-16 12:55:37,459 INFO     Evaluating the model... (3000/14472)
2023-08-16 12:58:30,508 INFO     Evaluating the model... (4000/14472)
2023-08-16 13:01:22,966 INFO     Evaluating the model... (5000/14472)
2023-08-16 13:04:10,755 INFO     Evaluating the model... (6000/14472)
2023-08-16 13:07:06,228 INFO     Evaluating the model... (7000/14472)
2023-08-16 13:09:57,109 INFO     Evaluating the model... (8000/14472)
2023-08-16 13:12:44,037 INFO     Evaluating the model... (9000/14472)
2023-08-16 13:15:14,242 INFO     Evaluating the model... (10000/14472)
2023-08-16 13:17:31,733 INFO     Evaluating the model... (11000/14472)
2023-08-16 13:19:48,088 INFO     Evaluating the model... (12000/14472)
2023-08-16 13:22:08,672 INFO     Evaluating the model... (13000/14472)
2023-08-16 13:24:45,799 INFO     Evaluating the model... (14000/14472)
2023-08-16 13:25:51,665 INFO     Test MRR at step 149999: 0.239147
2023-08-16 13:25:51,666 INFO     Test MR at step 149999: 4595.298625
2023-08-16 13:25:51,666 INFO     Test HITS@1 at step 149999: 0.169606
2023-08-16 13:25:51,667 INFO     Test HITS@3 at step 149999: 0.260529
2023-08-16 13:25:51,667 INFO     Test HITS@10 at step 149999: 0.381416


PairRE模型, DRKG17k-21 tmux a -t test4
CUDA_VISIBLE_DEVICES=3 python -u codes/run.py --do_train \
 --cuda \
 --do_valid \
 --do_test \
 --data_path ../data/DRKG17k-21 \
 --model PairRE \
 -n 256 -b 1024 -d 1000 \
 -g 24.0 -a 1.0 -adv \
 -lr 0.0001 --max_steps 150000 \
 -save models/PairRE_DRKG17k-21 --test_batch_size 16 -dr 

2023-08-15 22:04:49,174 INFO     Valid MRR at step 149999: 0.451690
2023-08-15 22:04:49,175 INFO     Valid MR at step 149999: 158.321098
2023-08-15 22:04:49,175 INFO     Valid HITS@1 at step 149999: 0.359213
2023-08-15 22:04:49,175 INFO     Valid HITS@3 at step 149999: 0.475726
2023-08-15 22:04:49,175 INFO     Valid HITS@10 at step 149999: 0.646534
2023-08-15 22:04:49,175 INFO     Evaluating on Test Dataset...
2023-08-15 22:04:50,050 INFO     Evaluating the model... (0/8078)
2023-08-15 22:05:23,965 INFO     Evaluating the model... (1000/8078)
2023-08-15 22:05:57,825 INFO     Evaluating the model... (2000/8078)
2023-08-15 22:06:31,812 INFO     Evaluating the model... (3000/8078)
2023-08-15 22:07:06,306 INFO     Evaluating the model... (4000/8078)
2023-08-15 22:07:38,798 INFO     Evaluating the model... (5000/8078)
2023-08-15 22:08:10,797 INFO     Evaluating the model... (6000/8078)
2023-08-15 22:08:42,644 INFO     Evaluating the model... (7000/8078)
2023-08-15 22:09:14,694 INFO     Evaluating the model... (8000/8078)
2023-08-15 22:09:17,338 INFO     Test MRR at step 149999: 0.450633
2023-08-15 22:09:17,339 INFO     Test MR at step 149999: 163.477483
2023-08-15 22:09:17,339 INFO     Test HITS@1 at step 149999: 0.358110
2023-08-15 22:09:17,339 INFO     Test HITS@3 at step 149999: 0.474155
2023-08-15 22:09:17,339 INFO     Test HITS@10 at step 149999: 0.646262





cd /home/bingxing2/home/scx6266/GNN/ProcrustEs-KGE-main
conda activate GNN

在bx上调好环境了，在节点9上跑， 出现了RuntimeError: Function 'LinalgSvdBackward0' returned nan values in its 0th output. 随着训练次数的增加，损失有nan,此外，没有评估方法，不行。

ProcrustEs-KGE tmux a -t gnn2
CUDA_VISIBLE_DEVICES=1 python train.py --cuda --data_path ../data/DB8k-28 -lr 0.05 -td 2000 -sd 20 -save save_model1


CUDA_VISIBLE_DEVICES=1 python model_test.py --cuda --data_path ../data/DB8k-28 -lr 0.05 -td 2000 -sd 20 -save save_model1



ProcrustEs-KGE tmux a -t gnn4
CUDA_VISIBLE_DEVICES=1 python train.py --cuda --data_path ../data/New_PharmKG8k-28 -lr 0.05 -td 2000 -sd 20 -save save_model2


ProcrustEs-KGE tmux a -t gnn5
CUDA_VISIBLE_DEVICES=2 python train.py --cuda --data_path ../data/BioKG72k_14 -lr 0.05 -td 1000 -sd 20 -save save_model3


ProcrustEs-KGE tmux a -t gnn6
CUDA_VISIBLE_DEVICES=3 python train.py --cuda --data_path ../data/DRKG17k-21 -lr 0.05 -td 1000 -sd 20 -save save_model4



kill -9 $(ps aux | grep train.py | grep -v grep | awk '{print $2}')






重新跑温度系数：
在160上，温度系数测试

tmux a -t test1 tem = 0.2

CUDA_VISIBLE_DEVICES=0 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem02-fullsample --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0

2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 37
2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35136
2023-08-12 04:54:22,098 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 170.99478
2023-08-12 04:54:22,099 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26005
2023-08-12 04:54:22,099 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38349
2023-08-12 04:54:22,099 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53718
2023-08-12 04:54:22,099 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 04:54:30,771 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34782
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 189.21416
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25528
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38388
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53017
2023-08-12 04:54:30,772 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 04:54:30 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem005_notext_conve_contrastive_loss_FB15k-237_CLcmgat_11_08_2023_11_21_19.log


再测：
2023-09-07 11:52:19,625 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 11:52:19,625 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 29
2023-09-07 11:52:19,625 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 11:52:19,625 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.33484
2023-09-07 11:52:19,625 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 186.10770
2023-09-07 11:52:19,625 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.24502
2023-09-07 11:52:19,625 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.36632
2023-09-07 11:52:19,625 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.51668
2023-09-07 11:52:19,625 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 11:52:30,112 - run_fb15k-237_no_dgi.py - [INFO] - ²âÊÔ:
2023-09-07 11:52:30,113 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.33078
2023-09-07 11:52:30,113 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 199.23691
2023-09-07 11:52:30,113 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.23874
2023-09-07 11:52:30,113 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.36575
2023-09-07 11:52:30,114 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.51493
2023-09-07 11:52:30,114 - run_fb15k-237_no_dgi.py - [INFO] - ³ÌÐòÖÕÖ¹Ê±¼ä:Thu Sep  7 11:52:30 2023
file_path: /data/fzg/GNN/Ò½Ñ§GNN/new_´ïµ½ÊµÑé½á¹ûµÄCMGAT/fb15k237_log/LP_ReLU6-conve-tem02-fullsample_notext_conve_contrastive_loss_FB15k-237_CLcmgat_06_09_2023_19_39_09.log



tmux a -t test2 tem = 0.1
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem01 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.1 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0  --change_tem 0
2023-08-12 05:59:38,514 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 05:59:38,514 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 40
2023-08-12 05:59:38,514 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 05:59:38,514 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35252
2023-08-12 05:59:38,515 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 173.33758
2023-08-12 05:59:38,515 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26248
2023-08-12 05:59:38,515 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38449
2023-08-12 05:59:38,515 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53373
2023-08-12 05:59:38,516 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34741
2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 190.31767
2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25540
2023-08-12 05:59:46,201 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38222
2023-08-12 05:59:46,202 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53130
2023-08-12 05:59:46,202 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 05:59:46 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem01_notext_conve_contrastive_loss_FB15k-237_CLcmgat_11_08_2023_12_07_00.log

再测：
2023-09-07 15:53:24,835 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 15:53:24,835 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 61
2023-09-07 15:53:24,835 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 15:53:24,836 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.32950
2023-09-07 15:53:24,836 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 202.49644
2023-09-07 15:53:24,836 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.23849
2023-09-07 15:53:24,836 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.36219
2023-09-07 15:53:24,836 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.51277
2023-09-07 15:53:24,836 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 15:53:32,827 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-07 15:53:32,827 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.32726
2023-09-07 15:53:32,827 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 218.01561
2023-09-07 15:53:32,827 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.23456
2023-09-07 15:53:32,828 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.36336
2023-09-07 15:53:32,828 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.51063
2023-09-07 15:53:32,828 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Sep  7 15:53:32 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem01_notext_conve_contrastive_loss_FB15k-237_CLcmgat_06_09_2023_18_30_06.log



tmux a -t test3 tem = 0.3
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem03 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.3 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0

2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 29
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35075
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 169.78899
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26036
2023-08-12 03:33:06,554 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38369
2023-08-12 03:33:06,555 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53102
2023-08-12 03:33:06,555 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 03:33:16,937 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 03:33:16,940 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34826
2023-08-12 03:33:16,941 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 187.96384
2023-08-12 03:33:16,942 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25784
2023-08-12 03:33:16,942 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38127
2023-08-12 03:33:16,942 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.52817
2023-08-12 03:33:16,943 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 03:33:16 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem03_notext_conve_contrastive_loss_FB15k-237_CLcmgat_11_08_2023_11_23_16.log

再测：
2023-09-07 11:58:37,996 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 11:58:37,996 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 30
2023-09-07 11:58:37,996 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 11:58:37,996 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.34105
2023-09-07 11:58:37,997 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 171.43596
2023-09-07 11:58:37,997 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.25215
2023-09-07 11:58:37,997 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.37143
2023-09-07 11:58:37,997 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.52096
2023-09-07 11:58:37,997 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 11:58:48,549 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-07 11:58:48,549 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.33874
2023-09-07 11:58:48,549 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 183.34047
2023-09-07 11:58:48,549 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.24758
2023-09-07 11:58:48,549 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.37027
2023-09-07 11:58:48,550 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.52355
2023-09-07 11:58:48,550 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Sep  7 11:58:48 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem03_notext_conve_contrastive_loss_FB15k-237_CLcmgat_06_09_2023_19_39_35.log



节点8

tmux a -t test1 tem = 0.5 
CUDA_VISIBLE_DEVICES=0 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem05 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.5 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0

2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 29
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35166
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 167.32253
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26119
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38386
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53291
2023-08-12 03:34:07,799 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 03:34:17,131 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 03:34:17,131 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34764
2023-08-12 03:34:17,131 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 187.22425
2023-08-12 03:34:17,131 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25708
2023-08-12 03:34:17,132 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38129
2023-08-12 03:34:17,132 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.52876
2023-08-12 03:34:17,132 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 03:34:17 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem05_notext_conve_contrastive_loss_FB15k-237_CLcmgat_11_08_2023_11_24_00.log


再测试：
2023-09-07 03:22:01,787 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 03:22:01,787 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 29
2023-09-07 03:22:01,787 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 03:22:01,787 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.34660
2023-09-07 03:22:01,787 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 168.58209
2023-09-07 03:22:01,787 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.25657
2023-09-07 03:22:01,787 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.37913
2023-09-07 03:22:01,787 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.52871
2023-09-07 03:22:01,787 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 03:22:06,350 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-07 03:22:06,350 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34235
2023-09-07 03:22:06,351 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 188.78327
2023-09-07 03:22:06,352 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25066
2023-09-07 03:22:06,352 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.37528
2023-09-07 03:22:06,352 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.52541
2023-09-07 03:22:06,352 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Sep  7 03:22:06 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem05_notext_conve_contrastive_loss_FB15k-237_CLcmgat_06_09_2023
_19_37_50.log




节点8

tmux a -t test2 tem = 0.7
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem07 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.7 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0

2023-08-11 21:30:08,557 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-11 21:30:08,557 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 43
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35255
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 172.91166
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26065
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38617
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53778
2023-08-11 21:30:08,558 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34756
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 190.15846
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25430
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38317
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53420
2023-08-11 21:30:13,493 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Fri Aug 11 21:30:13 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem07_notext_conve_contrastive_loss_FB15k-237_
CLcmgat_11_08_2023_12_19_14.log


再测试：

2023-09-07 03:26:51,725 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 03:26:51,725 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 29
2023-09-07 03:26:51,725 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 03:26:51,725 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35162
2023-09-07 03:26:51,725 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 166.38132
2023-09-07 03:26:51,725 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26208
2023-09-07 03:26:51,725 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38335
2023-09-07 03:26:51,725 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53308
2023-09-07 03:26:51,725 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 03:26:57,464 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-07 03:26:57,464 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34691
2023-09-07 03:26:57,464 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 181.82263
2023-09-07 03:26:57,464 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25589
2023-09-07 03:26:57,465 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38041
2023-09-07 03:26:57,465 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53034
2023-09-07 03:26:57,465 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Sep  7 03:26:57 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem07_notext_conve_contrastive_loss_FB15k-237_CLcmgat_06_09_2023
_19_37_50.log




tmux a -t test1 tem = 0.8 代跑 节点7
CUDA_VISIBLE_DEVICES=0 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem08 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 0.8 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0

2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 28
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35161
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 172.27850
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26193
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38457
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53279
2023-08-12 05:30:01,561 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34701
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 191.20524
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25559
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38136
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53093
2023-08-12 05:30:06,289 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Aug 12 05:30:06 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem08_notext_conve_contrastive_loss_FB15k-237_
CLcmgat_11_08_2023_21_51_43.log


再测：
2023-09-07 17:08:40,452 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 17:08:40,452 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 26
2023-09-07 17:08:40,452 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 17:08:40,452 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35139
2023-09-07 17:08:40,452 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 170.87782
2023-09-07 17:08:40,453 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26276
2023-09-07 17:08:40,453 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38072
2023-09-07 17:08:40,453 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53285
2023-09-07 17:08:40,453 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 17:08:45,411 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-07 17:08:45,411 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34665
2023-09-07 17:08:45,411 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 186.25723
2023-09-07 17:08:45,411 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25457
2023-09-07 17:08:45,411 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38026
2023-09-07 17:08:45,411 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53139
2023-09-07 17:08:45,411 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Sep  7 17:08:45 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem08_notext_conve_contrastive_loss_FB15k-237_CLcmgat_07_09_2023
_09_49_34.log


tmux a -t test2 tem = 1.0 节点7
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem10 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.0 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0


2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 43
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35150
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 176.56923
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26062
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38437
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53519
2023-08-13 01:41:48,189 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - ²âÊÔ:
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34866
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 190.72339
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25682
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38227
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53489
2023-08-13 01:41:51,728 - run_fb15k-237_no_dgi.py - [INFO] - ³ÌÐòÖÕÖ¹Ê±¼ä:Sun Aug 13 01:41:51 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem10_notext_conve_contrastive_loss_FB15k-237_
CLcmgat_12_08_2023_16_41_58.log


再测：
2023-09-07 18:24:36,329 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 18:24:36,329 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 36
2023-09-07 18:24:36,329 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 18:24:36,329 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35066
2023-09-07 18:24:36,329 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 171.63539
2023-09-07 18:24:36,329 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.25962
2023-09-07 18:24:36,329 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38167
2023-09-07 18:24:36,329 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53650
2023-09-07 18:24:36,329 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 18:24:42,492 - run_fb15k-237_no_dgi.py - [INFO] - ²âÊÔ:
2023-09-07 18:24:42,492 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34711
2023-09-07 18:24:42,492 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 188.39678
2023-09-07 18:24:42,492 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25494
2023-09-07 18:24:42,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38158
2023-09-07 18:24:42,493 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53318
2023-09-07 18:24:42,493 - run_fb15k-237_no_dgi.py - [INFO] - ³ÌÐòÖÕÖ¹Ê±¼ä:Thu Sep  7 18:24:42 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem10_notext_conve_contrastive_loss_FB15k-237_CLcmgat_07_09_2023
_09_49_34.log



节点8： 不同的数据集适应不同的温度系数，这个需要调节
开放温度系数变化：tmux a -t test1 tem = 1 节点8
CUDA_VISIBLE_DEVICES=0 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem10-chengetem --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.0 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 1

测试：
2023-09-07 18:15:08,268 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 83
2023-09-07 18:15:08,268 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 18:15:08,268 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35708
2023-09-07 18:15:08,268 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 168.60074
2023-09-07 18:15:08,269 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26530
2023-09-07 18:15:08,269 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.39105
2023-09-07 18:15:08,269 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.54291
2023-09-07 18:15:08,269 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 18:20:59,140 - run_fb15k-237_no_dgi.py - [INFO] - 验证:
2023-09-07 18:20:59,140 - run_fb15k-237_no_dgi.py - [INFO] - Epoch:86  time 5.0m  LR:0.0010000000
2023-09-07 18:20:59,140 - run_fb15k-237_no_dgi.py - [INFO] - Train Loss:3.5915412100  Valid Loss:4.2520684617
2023-09-07 18:20:59,140 - run_fb15k-237_no_dgi.py - [INFO] - Valid MRR:0.35629  Valid MR:166.93205
2023-09-07 18:20:59,140 - run_fb15k-237_no_dgi.py - [INFO] - Valid H@1:0.26356  Valid H@3:0.39042  Valid H@10:0.54209
2023-09-07 18:20:59,140 - run_fb15k-237_no_dgi.py - [INFO] - 

LP_ReLU6-conve-tem10-chengetem_notext_conve_contrastive_loss_FB15k-237_CLcmgat_07_09_2023_09_58_47

会出现溢出，为什么呢？

再测试：
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem10-chengetem --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.0 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 1 --save_path LP_ReLU6-conve-tem10-chengetem_notext_conve_contrastive_loss_FB15k-237_CLcmgat_07_09_2023_09_58_47 --test 1

2023-09-08 11:15:01,997 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-08 11:15:01,997 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.35324
2023-09-08 11:15:01,997 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 180.51314
2023-09-08 11:15:01,998 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.26009
2023-09-08 11:15:01,998 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38982
2023-09-08 11:15:01,998 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53911
2023-09-08 11:15:01,998 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Fri Sep  8 11:15:01 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem10-chengetem_notext_conve_contrastive_loss_FB15k-237_CLcmgat_08_09_2023_11_14_36.log



再测试：tmux a -t test3 节点7 tem = 1.5

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem15-chengetem --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.5 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --model_dir ./fb15k237_model_save  --log_dir ./fb15k237_log --change_tem 1


2023-09-09 05:44:52,184 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-09 05:44:52,184 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 41
2023-09-09 05:44:52,184 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-09 05:44:52,184 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35194
2023-09-09 05:44:52,184 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 174.60168
2023-09-09 05:44:52,184 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26176
2023-09-09 05:44:52,184 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38389
2023-09-09 05:44:52,185 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53701
2023-09-09 05:44:52,185 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-09 05:44:58,441 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-09 05:44:58,442 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34725
2023-09-09 05:44:58,442 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 200.78877
2023-09-09 05:44:58,442 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25530
2023-09-09 05:44:58,442 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38124
2023-09-09 05:44:58,442 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53274
2023-09-09 05:44:58,442 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Sat Sep  9 05:44:58 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem15-chengetem_notext_conve_contrastive_loss_FB15k-237_CLcmgat_
08_09_2023_20_48_24.log


再测试：tmux a -t test3 节点7 tem = 1.0

CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem15-chengetem --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.0 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --model_dir ./fb15k237_model_save  --log_dir ./fb15k237_log --change_tem 1





tmux a -t test2 tem = 1.1 节点8
CUDA_VISIBLE_DEVICES=1 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem11 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.1 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0

2023-09-07 18:51:03,432 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 18:51:03,432 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 41
2023-09-07 18:51:03,432 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 18:51:03,432 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35214
2023-09-07 18:51:03,432 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 172.05948
2023-09-07 18:51:03,433 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26151
2023-09-07 18:51:03,433 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38480
2023-09-07 18:51:03,435 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53379
2023-09-07 18:51:03,436 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 18:51:06,910 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-07 18:51:06,910 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34633
2023-09-07 18:51:06,910 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 193.21118
2023-09-07 18:51:06,910 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25332
2023-09-07 18:51:06,910 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38026
2023-09-07 18:51:06,910 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53227
2023-09-07 18:51:06,911 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Sep  7 18:51:06 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem11_notext_conve_contrastive_loss_FB15k-237_CLcmgat_07_09_2023
_09_58_47.log



tmux a -t test3 tem = 1.2 节点8
CUDA_VISIBLE_DEVICES=2 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem12 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.2 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0

2023-09-07 18:09:59,449 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 18:09:59,449 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 33
2023-09-07 18:09:59,449 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 18:09:59,449 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35215
2023-09-07 18:09:59,449 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 174.45800
2023-09-07 18:09:59,449 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26248
2023-09-07 18:09:59,449 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38429
2023-09-07 18:09:59,449 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53425
2023-09-07 18:09:59,449 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 18:10:02,927 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-07 18:10:02,927 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34604
2023-09-07 18:10:02,927 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 192.79661
2023-09-07 18:10:02,928 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25379
2023-09-07 18:10:02,928 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38095
2023-09-07 18:10:02,928 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53039
2023-09-07 18:10:02,928 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Sep  7 18:10:02 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem12_notext_conve_contrastive_loss_FB15k-237_CLcmgat_07_09_2023
_09_58_53.log



tmux a -t test4 tem = 1.3 节点8
CUDA_VISIBLE_DEVICES=3 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem13 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.3 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0

2023-09-07 19:56:43,362 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-07 19:56:43,362 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 51
2023-09-07 19:56:43,362 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-07 19:56:43,362 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35242
2023-09-07 19:56:43,362 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 176.66239
2023-09-07 19:56:43,362 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.25991
2023-09-07 19:56:43,363 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38566
2023-09-07 19:56:43,363 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53912
2023-09-07 19:56:43,363 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-07 19:56:48,108 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-07 19:56:48,109 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34855
2023-09-07 19:56:48,109 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 195.94078
2023-09-07 19:56:48,109 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25528
2023-09-07 19:56:48,109 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38332
2023-09-07 19:56:48,109 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53538
2023-09-07 19:56:48,109 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Thu Sep  7 19:56:48 2023
file_path: /home/bingxing2/home/scx6266/GNN/new_CMGAT/fb15k237_log/LP_ReLU6-conve-tem13_notext_conve_contrastive_loss_FB15k-237_CLcmgat_07_09_2023
_09_59_21.log



tmux a -t test1 tem = 1.5 160
CUDA_VISIBLE_DEVICES=0 torchrun --rdzv_backend c10d --rdzv_endpoint localhost:0 --nnodes 1 --nproc_per_node 1 --rdzv_id 1 run_fb15k-237_no_dgi.py  --dataset FB15k-237 --loss_function contrastive_loss --use_test 1 --test_name  ReLU6-conve-tem15 --score_func conve --subgraph_loss_rate 0.0 --sample_mod full --temperature 1.5 --stop_num 50 --change_lr 0 --optimizer adam  --Q 1.0 --change_tem 0

2023-09-08 08:20:41,760 - run_fb15k-237_no_dgi.py - [INFO] - Early Stopping!!
2023-09-08 08:20:41,760 - run_fb15k-237_no_dgi.py - [INFO] - best_epoch: 44
2023-09-08 08:20:41,760 - run_fb15k-237_no_dgi.py - [INFO] - best_lr: 0.0010000000
2023-09-08 08:20:41,760 - run_fb15k-237_no_dgi.py - [INFO] - best_mrr: 0.35371
2023-09-08 08:20:41,761 - run_fb15k-237_no_dgi.py - [INFO] - best_mr: 175.68760
2023-09-08 08:20:41,761 - run_fb15k-237_no_dgi.py - [INFO] - best_hit1: 0.26305
2023-09-08 08:20:41,761 - run_fb15k-237_no_dgi.py - [INFO] - best_hit3: 0.38566
2023-09-08 08:20:41,761 - run_fb15k-237_no_dgi.py - [INFO] - best_hit10: 0.53747
2023-09-08 08:20:41,761 - run_fb15k-237_no_dgi.py - [INFO] - 


2023-09-08 08:20:49,906 - run_fb15k-237_no_dgi.py - [INFO] - 测试:
2023-09-08 08:20:49,906 - run_fb15k-237_no_dgi.py - [INFO] - Test_mrr: 0.34956
2023-09-08 08:20:49,906 - run_fb15k-237_no_dgi.py - [INFO] - Test_mr: 193.26429
2023-09-08 08:20:49,906 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit1: 0.25779
2023-09-08 08:20:49,907 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit3: 0.38310
2023-09-08 08:20:49,907 - run_fb15k-237_no_dgi.py - [INFO] - Test_hit10: 0.53552
2023-09-08 08:20:49,907 - run_fb15k-237_no_dgi.py - [INFO] - 程序终止时间:Fri Sep  8 08:20:49 2023
file_path: /data/fzg/GNN/医学GNN/new_达到实验结果的CMGAT/fb15k237_log/LP_ReLU6-conve-tem15_notext_conve_contrastive_loss_FB15k-237_CLcmgat_07_09_2023_17_00_53.log



开题：基于等变一致性扩散过程的分子对接模型设计
刚性对接，柔性对接，蛋白配体自由能计算（展望），围绕着构象生成。


对比学习部分：将测试集进一步划分一下，3个数据集都做

药物，基因，疾病



基因-药物

药物-疾病

基因-疾病


都做
测试分类：